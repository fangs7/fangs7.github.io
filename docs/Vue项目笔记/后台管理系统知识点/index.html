<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Vue项目笔记/后台管理系统知识点">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">一、登录业务（跨域问题修改配置） | Fangs-Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fangs7.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fangs7.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fangs7.github.io/docs/Vue项目笔记/后台管理系统知识点"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="一、登录业务（跨域问题修改配置） | Fangs-Blog"><meta data-rh="true" name="description" content="1.设置静态组件"><meta data-rh="true" property="og:description" content="1.设置静态组件"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fangs7.github.io/docs/Vue项目笔记/后台管理系统知识点"><link data-rh="true" rel="alternate" href="https://fangs7.github.io/docs/Vue项目笔记/后台管理系统知识点" hreflang="zh"><link data-rh="true" rel="alternate" href="https://fangs7.github.io/docs/Vue项目笔记/后台管理系统知识点" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Fangs-Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Fangs-Blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce8626c7.css">
<link rel="preload" href="/assets/js/runtime~main.1d17331b.js" as="script">
<link rel="preload" href="/assets/js/main.e91e50e7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/1.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/1.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">我的网站</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/js">JavaScript</a><a class="navbar__item navbar__link" href="/node.js">Node.js笔记</a><a class="navbar__item navbar__link" href="/ServerNotes">Node搭建简单服务器接口</a><a class="navbar__item navbar__link" href="/ajax">Ajax&amp;Axios</a><a class="navbar__item navbar__link" href="/webpack">git&amp;Webpack</a><a class="navbar__item navbar__link" href="/vue">Vue2</a><a class="navbar__item navbar__link" href="/echarts">Echarts</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Vue项目笔记/电商项目知识点">Vue项目笔记</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Vue项目笔记/电商项目知识点">电商项目知识点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Vue项目笔记/后台管理系统知识点">一、登录业务（跨域问题修改配置）</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Vue项目笔记</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">一、登录业务（跨域问题修改配置）</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>一、登录业务（跨域问题修改配置）</h1><p>1.设置静态组件</p><p>​		el-form 组件：elementUI插件里面的一个组件，经常展示表单元素   model：用于收集表单数据，rules：表单验证的规则</p><p>2.点击登录按钮时，设置点击事件，写api请求，派发action请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//点击事件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handleLogin() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //这里是验证表单元素是否符合规则，返回布尔值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$refs.loginForm.validate(valid =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果符合规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (valid) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //按钮会有一个loading效果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.loading = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //派发action，带着用户名和密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.$store.dispatch(&#x27;user/login&#x27;, this.loginForm).then(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //登录成功进行路由跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$router.push({ path: this.redirect || &#x27;/&#x27; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //loading效果结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.loading = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }).catch(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.loading = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          console.log(&#x27;error submit!!&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //仓库中，存储token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // 这里是在处理登录业务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  async login({ commit }, userInfo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //解构出用户名，密码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const { username, password } = userInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let res = await login({ username: username.trim(), password: password })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (res.code == 20000) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      commit(&#x27;SET_TOKEN&#x27;, res.data.token)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setToken(res.data.token)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return Promise.reject(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> 3.换成真实接口，查看axios（因为不是自己写的），设置代理跨域的问题</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//配置代理跨域</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //这里因为是.env.development文件配置的问题，这里需要修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;/dev-api&#x27;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target:&#x27;http://gmall-h5-api.atguigu.cn&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathRewrite:{&#x27;^/dev-api&#x27;:&#x27;&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>二、退出登录</h1><p>1.layout中找到导航组件，修改</p><h1>三、路由组件的搭建</h1><p>1.删除一些不需要的路由组件</p><p>2删除router中注册过的路由组件</p><p>3.新建自己需要的路由组件</p><p>4.注册自己新建的路由组件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: &#x27;/product&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    component: Layout,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: &#x27;Product&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta: { title: &#x27;商品管理&#x27;, icon: &#x27;el-icon-goods&#x27; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    children: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path: &#x27;trademark&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: &#x27;TradeMark&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component: () =&gt; import(&#x27;@/views/product/TrafeMark&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meta: { title: &#x27;品牌管理&#x27; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path: &#x27;attr&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: &#x27;Attr&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component: () =&gt; import(&#x27;@/views/product/Attr&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meta: { title: &#x27;平台属性管理&#x27; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path: &#x27;spu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: &#x27;Spu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component: () =&gt; import(&#x27;@/views/product/Spu&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meta: { title: &#x27;Spu管理&#x27; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path: &#x27;sku&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: &#x27;Sku&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component: () =&gt; import(&#x27;@/views/product/Sku&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meta: { title: &#x27;Sku管理&#x27; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>四、商品管理组件</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1品牌管理">1.品牌管理<a href="#1品牌管理" class="hash-link" aria-label="1.品牌管理的直接链接" title="1.品牌管理的直接链接">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1品牌管理的静态组件使用饿了么ui">1.品牌管理的静态组件（使用饿了么UI）<a href="#1品牌管理的静态组件使用饿了么ui" class="hash-link" aria-label="1.品牌管理的静态组件（使用饿了么UI）的直接链接" title="1.品牌管理的静态组件（使用饿了么UI）的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">表格 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-table 一般是和 &lt;el-table-column 一起使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data表示表格展示的数据，el-column 有多少表示表格有多少列</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              border 是给表格添加边框</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   column的属性：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              label 是显示的标题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              width 对应列的宽度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              align 标题的对齐方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              prop  对应列内容的字段名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">分页器 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        当前页码数，总数目，每一页展示的数量，连续页码数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @size-change=&quot;handleSizeChange&quot;   代表 每一页展示数据条数改变时触发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @current-change=&quot;handleCurrentChange&quot;  代表 当前页面改变的时候触发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      current-page 当前第几页</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      page-sizes  代表可以设置每页展示多少数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      page-size  每一页可是展示多少数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      layout  分页器布局</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total 总条数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pager-count 按钮的数量，如果是 9  连续页码数就是7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2品牌列表展示">2.品牌列表展示<a href="#2品牌列表展示" class="hash-link" aria-label="2.品牌列表展示的直接链接" title="2.品牌列表展示的直接链接">​</a></h5><p>​	1.写请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//引入封装好的axios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import request from &#x27;@/utils/request&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqTradeMarkList = (page,limit)=&gt;request({url:`/admin/product/baseTrademark/${page}/${limit}`,method:&#x27;get&#x27;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	2.将product的四个模块所需要的请求暴露在一起（在api文件夹中新建一个js文件，将四个模块请求接口统一暴露）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//将四个模块请求接口统一暴露</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as trademark from &#x27;./product/tradeMark&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as attr from &#x27;./product/attr&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as sku from &#x27;./product/sku&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as spu from &#x27;./product/spu&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//对外暴露</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trademark,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attr,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//在main.js中引入（import API from &#x27;@/api/index.js&#x27;），放在vue的原型对象上，这样所有组件就可以直接使用(vue.pro...$API=API)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.mounted的时候发一次请求，获取到返回的数据保存</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> methods：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //pager默认是3，当mounted的时候，没有传递参数，那就使用pager=1，如果传递参数了，那就使用传递的那个参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async getTradeMarkList(pager=1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.page = pager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const {page,limit} = this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取品牌列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let res = await this.$API.trademark.reqTradeMarkList(page,limit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.tradeMarkList = res.data.records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.total = res.data.total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alert(res.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.饿了么UI组件使用，动态展示</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//表格</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-table style=&quot;width: 100%&quot; border :data=&quot;tradeMarkList&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1    &lt;el-table-column type=&quot;index&quot; label=&quot;序号&quot; width=&quot;80px&quot; align=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2     &lt;el-table-column prop=&quot;tmName&quot; label=&quot;品牌名称&quot; width=&quot;width&quot; align=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3    &lt;el-table-column prop=&quot;prop&quot; label=&quot;品牌LOGO&quot; width=&quot;width&quot; align=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //这里使用饿了么封装好的作用域插槽，slot-scope=‘{row,$index}’  row是返回的对象，$index是索引值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;template slot-scope=&quot;{row,$index}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;img :src=&quot;row.logoUrl&quot; alt=&quot;&quot; style=&quot;width:100px;height:100px&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4   &lt;el-table-column prop=&quot;prop&quot; label=&quot;操作&quot; width=&quot;width&quot; align=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;template slot-scope=&quot;{row,$index}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-edit&quot; size=&quot;mini&quot;&gt;修改&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; size=&quot;mini&quot;&gt;删除&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/el-table&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//分页器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-pagination style=&quot;margin:30px 0px 0px;textAlign:center&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @size-change=&quot;handleSizeChange&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @current-change=&quot;getTradeMarkList&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :current-page=&quot;page&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :page-sizes=&quot;[3, 5, 7]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :page-size=&quot;limit&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      layout=&quot; prev, pager, next, jumper,-&gt;,sizes,total&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :total=&quot;total&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/el-pagination&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//两个自定义事件的回调，可以接收到需要的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//pager默认是3，当mounted的时候，没有传递参数，那就使用pager=1，如果传递参数了，那就使用传递的那个参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3添加品牌的的静态组件和业务逻辑">3.添加品牌的的静态组件和业务逻辑<a href="#3添加品牌的的静态组件和业务逻辑" class="hash-link" aria-label="3.添加品牌的的静态组件和业务逻辑的直接链接" title="3.添加品牌的的静态组件和业务逻辑的直接链接">​</a></h5><p>​	1.静态组件的完成（照着饿了么文档做）</p><p>​	2.写api请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//由于添加品牌和修改品牌用的是同一个组件，那么点击确定的时候就会有不同的情况，所以要把添加和修改的接口写到一起</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//添加||修改品牌的操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqAddOrUpdateTradeMark = (tmForm)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//如果带的参数中有id，那就是修改品牌，反之就是添加品牌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(tmForm.id){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return request({url:&#x27;/admin/product/baseTrademark/update&#x27;,method:&#x27;put&#x27;,data:tmForm})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return request({url:&#x27;/admin/product/baseTrademark/save&#x27;,method:&#x27;post&#x27;,data:tmForm})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	3.收集数据，</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 这里model用来收集表单数据 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-form :model=&quot;tmForm&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-form-item label=&quot;品牌名称&quot; label-width=&quot;100px&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-input v-model=&quot;tmForm.tmName&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-form-item&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //:model  和v-model 联合使用收集数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data：{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tmForm:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tmName:&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logoUrl:&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //但是这里的logoUrl就不能用v-model收集了，在图片上传成功执行的函数会返回参数，可以获取到图片的URL进行收集</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            action：是图片上传到什么地方</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :on-success  是图片上传成功执行一次</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :before-upload   图片上传之前执行一次</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-upload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            class=&quot;avatar-uploader&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //这里记得写/dev-api  否则报404</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            action=&quot;/dev-api/admin/product/fileUpload&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :show-file-list=&quot;false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :on-success=&quot;handleAvatarSuccess&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :before-upload=&quot;beforeAvatarUpload&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;img v-if=&quot;tmForm.logoUrl&quot; :src=&quot;tmForm.logoUrl&quot; class=&quot;avatar&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/el-upload&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	4.点击确认按钮</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//点击确定添加按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      async addOrUpdateTradeMark(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.dialogFormVisible = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await this.$API.trademark.reqAddOrUpdateTradeMark(this.tmForm)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //弹出一个信息：添加品牌成功，修改品牌成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.$message(this.tmForm.id?&#x27;修改品牌成功&#x27;:&quot;添加品牌成功&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.getTradeMarkList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          alert(res.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //小bug：每次上传图片，输入名称的时候，如果点击取消，上次输入的数据还会存在,要在每次点击添加的时候清空上一次的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //点击添加的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tianjia(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.dialogFormVisible = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //清空每一次上传的名称和图片地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.tmForm={tmName:&#x27;&#x27;,logoUrl:&#x27;&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4修改品牌的业务逻辑浅拷贝111">4.修改品牌的业务逻辑（浅拷贝111）<a href="#4修改品牌的业务逻辑浅拷贝111" class="hash-link" aria-label="4.修改品牌的业务逻辑（浅拷贝111）的直接链接" title="4.修改品牌的业务逻辑（浅拷贝111）的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">updateTradeMark(row){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.dialogFormVisible = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //点击修改按钮之后将已有的数据，返回给form，进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果这里直接 this.tmForm = row，那么就将row的数据直接赋值给tmForm，用户修改之后，点击取消还是会修改表单数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //所以这里要使用浅拷贝，浅拷贝一个row，赋值给tmForm，这样在用户点击确认按钮之前，修改的就只是tmForm，但是表单展示的row却不会改变</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.tmForm = {...row}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //点击确定按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //点击确定（添加按钮 || 修改按钮）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      async addOrUpdateTradeMark(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.dialogFormVisible = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await this.$API.trademark.reqAddOrUpdateTradeMark(this.tmForm)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //弹出一个信息：添加品牌成功，修改品牌成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.$message({message:this.tmForm.id?&#x27;修改品牌成功&#x27;:&quot;添加品牌成功&quot;,type:&#x27;success&#x27;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //如果tmform有id那么就证明是修改品牌，就需要修改结束之后停留当前页面      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.getTradeMarkList(this.tmForm.id?this.tmForm.page:1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          alert(res.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="5表单验证功能">5.表单验证功能<a href="#5表单验证功能" class="hash-link" aria-label="5.表单验证功能的直接链接" title="5.表单验证功能的直接链接">​</a></h5><p>​	Form 组件提供了表单验证的功能，只需要通过 <code>rules</code> 属性传入约定的验证规则，并将 Form-Item 的 <code>prop</code> 属性设置为需校验的字段名即可</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-form :model=&quot;tmForm&quot; :rules=&quot;rules&quot; ref=&quot;ruleForm&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-form-item label=&quot;品牌名称&quot; label-width=&quot;100px&quot; prop=&quot;tmName&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-form-item label=&quot;品牌LOGO&quot; label-width=&quot;100px&quot; prop=&quot;logoUrl&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//表单验证的规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rules: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tmName: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //required：必须的   message 提示的信息   trigger  用户事件（做什么才进行表单验证）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          { required: true, message: &quot;请输入品牌名称&quot;, trigger: &quot;blur&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            min: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            max: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message: &quot;长度在 2 到 10 个字符&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            trigger: &quot;change&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logoUrl: [{ required: true, message: &quot;请选择上传的图片&quot; }],js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //只有完成表单验证才可以提交</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //点击确定（添加按钮 || 修改按钮）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addOrUpdateTradeMark() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.dialogFormVisible = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$refs.ruleForm.validate(async(success) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //如果表单验证成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (success) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          let res = await this.$API.trademark.reqAddOrUpdateTradeMark(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.tmForm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //弹出一个信息：添加品牌成功，修改品牌成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$message({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              message: this.tmForm.id ? &quot;修改品牌成功&quot; : &quot;添加品牌成功&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              type: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.getTradeMarkList(this.tmForm.id ? this.tmForm.page : 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            alert(res.message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          console.log(&quot;error submit!!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>自定义校验规则<strong><strong><strong>***</strong></strong></strong></strong>重点**</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="6删除按钮的业务逻辑">6.删除按钮的业务逻辑<a href="#6删除按钮的业务逻辑" class="hash-link" aria-label="6.删除按钮的业务逻辑的直接链接" title="6.删除按钮的业务逻辑的直接链接">​</a></h5><p>​	1.写请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//删除品牌的操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqDeleteTradeMark = (id)=&gt;request({url:`/admin/product/baseTrademark/remove/${id}`,method:&#x27;delete&#x27;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.删除按钮的单击绑定以及回调函数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; size=&quot;mini&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @click=&quot;deleteTradeMark(row)&quot;       &gt;删除&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //删除按钮的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deleteTradeMark(row) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$confirm(`是否删除${row.tmName}`, &quot;提示&quot;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        confirmButtonText: &quot;确定&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cancelButtonText: &quot;取消&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type: &quot;warning&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .then(async() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //发请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          let res = await this.$API.trademark.reqDeleteTradeMark(row.id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (res.code==200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$message({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message: &quot;删除成功!&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ****//再次获取品牌信息(如果当页的品牌数大于1，就停留在本页，反之跳到上一页)****小细节</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.getTradeMarkList(this.tradeMarkList.length&gt;1?this.page:this.page-1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .catch(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.$message({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type: &quot;info&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message: &quot;已取消删除&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2商品管理attr">2.商品管理（attr）<a href="#2商品管理attr" class="hash-link" aria-label="2.商品管理（attr）的直接链接" title="2.商品管理（attr）的直接链接">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1三级联动静态组件">1.三级联动静态组件<a href="#1三级联动静态组件" class="hash-link" aria-label="1.三级联动静态组件的直接链接" title="1.三级联动静态组件的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.&lt;el-card&gt;&lt;/el-card&gt;:可以实现卡片带着小阴影的效果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.由于三级联动在其他的组件也需要使用，可以把三级联动设置为全局组件在components文件夹中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****在main.js文件中引入注册  vue.component(组件.name,组件)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.三级联动组件中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 这里的inline是行内表单，代表一行可以放置多个表单元素 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;el-form :inline=&quot;true&quot;  class=&quot;demo-form-inline&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-form-item label=&quot;一级分类&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-select  placeholder=&quot;请选择&quot; value=&#x27;&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-option label=&quot;区域一&quot; value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-option label=&quot;区域二&quot; value=&quot;beijing&quot;&gt;&lt;/el-option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-form-item&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-form-item label=&quot;二级分类&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-select  placeholder=&quot;请选择&quot; value=&#x27;&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-option label=&quot;区域一&quot; value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-option label=&quot;区域二&quot; value=&quot;beijing&quot;&gt;&lt;/el-option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-form-item&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-form-item label=&quot;三级分类&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-select  placeholder=&quot;请选择&quot; value=&#x27;&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-option label=&quot;区域一&quot; value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-option label=&quot;区域二&quot; value=&quot;beijing&quot;&gt;&lt;/el-option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-form-item&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/el-form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  4.在attr中引入即可</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2获取数据动态展示三级联动">2.获取数据动态展示三级联动<a href="#2获取数据动态展示三级联动" class="hash-link" aria-label="2.获取数据动态展示三级联动的直接链接" title="2.获取数据动态展示三级联动的直接链接">​</a></h5><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">1.</span><span class="token plain">首先写api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//获取三级联动一级，二级，三级分类的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">reqCategory1List</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;/admin/product/getCategory1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;get&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">reqCategory2List</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">category1Id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/admin/product/getCategory2/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">category1Id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;get&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">reqCategory3List</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">category2Id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/admin/product/getCategory3/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">category2Id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;get&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2.</span><span class="token plain">在组件mounted的时候获取到一级分类数据，进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mounted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//组件挂载完毕的时候获取一级分类的数据进行展示</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getCategory1List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">methods</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCategory1List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$</span><span class="token constant" style="color:#36acaa">API</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reqCategory1List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//收集一级分类的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">list1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">**</span><span class="token plain">在data中动态得到数据，并且存放返回的点击的id，供获取二级三级分类数据使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">**</span><span class="token plain">组件中显示</span><span class="token operator" style="color:#393A34">**</span><span class="token operator" style="color:#393A34">**</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">注意这里的</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">model，以及v</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">model和</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">**</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">应该代表的是收集的数据是什么</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">**</span><span class="token plain">v</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">应该是收集的数据放在哪里</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">**</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">应该是这个表单元素收集到的数据全部统一放在哪</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">inline</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">class</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;demo-form-inline&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;categoryId&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">item label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;一级分类&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">select  placeholder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;请选择&quot;</span><span class="token plain"> v</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;categoryId.category1Id&quot;</span><span class="token plain"> @change</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;getCategory2List&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">option </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;c1.name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;c1.id&quot;</span><span class="token plain"> v</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;c1 in list1&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;c1.id&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">option</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">select</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3.</span><span class="token plain">获取到一级分类之后，在改变一级分类的选项时，获取二级分类数据进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCategory2List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//解构出1id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">category1Id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">categoryId</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//发请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$</span><span class="token constant" style="color:#36acaa">API</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reqCategory2List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">category1Id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">list2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">**</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">展示和一级分类类似</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4.</span><span class="token plain">三级分类也一样</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5.</span><span class="token plain">小bug：如果选择过一次一级，二级，三级分类之后改变一级分类的选项时，上一次的二级，三级选项还存在</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        所以这里要在每一次改变之前，置空上一轮选择的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//当category1Id发生变化的时候，要清除上一次获取到的2id，3id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">categoryId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category2Id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">categoryId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category3Id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//当category2Id发生变化的时候，要清除上一次获取到的3id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">categoryId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category3Id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6.</span><span class="token plain">三级分类中存储的id，需要传递给attr组件，在attr组件中获取并发请求进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在三级联动组件中，当id改变的时候就给父组件传递新一轮的id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//将获取到的1id传给attr  这里传递多一个level 是为了区别123id用的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;getCategoryId&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">categoryId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">category1Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token literal-property property" style="color:#36acaa">level</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//在attr组件中，接收传递来的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">CategorySelect</span><span class="token plain"> @getCategoryId</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;getCategoryId&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">CategorySelect&gt;</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token operator" style="color:#393A34">/</span><span class="token comment" style="color:#999988;font-style:italic">//自定义事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//获取子组件传递来的id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">getCategoryId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter">categoryId</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">level</span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//区别三级分类相应的id，进行存储</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">level </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category1Id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> categoryId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">//id改变时，置空上一次传过来的id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category2Id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category3Id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">level </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category2Id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> categoryId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category3Id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">//这里代表三级id已经有了，所以要发请求进行展示了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category3Id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> categoryId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">//发请求获取品牌属性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAttrList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3平台属性管理attr动态展示">3.平台属性管理（attr）动态展示<a href="#3平台属性管理attr动态展示" class="hash-link" aria-label="3.平台属性管理（attr）动态展示的直接链接" title="3.平台属性管理（attr）动态展示的直接链接">​</a></h5><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">1.</span><span class="token plain">写请求api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2.</span><span class="token plain">发请求，获取数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//发请求获取品牌属性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAttrList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//解构出123id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> category1Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> category2Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> category3Id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$</span><span class="token constant" style="color:#36acaa">API</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reqAttrList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">category1Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">category2Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">category3Id </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrList</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//保存在data的attrList中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3.</span><span class="token plain">动态展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//卡片效果</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">card</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//按钮  disabled当3id没有的时候按钮不能使用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;primary&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;el-icon-plus&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">disabled</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;!category3Id&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">添加属性</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> 表格：展示平台属性 </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//data表示展示的是哪个里面的数据   border表示表格要带边框</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table style</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;width: 100%&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrList&quot;</span><span class="token plain"> border</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//el-table-column有几个就代表表格有几列  type=&quot;index&quot;表示下面的属性值是序号 label表示这列的列名    align居中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;index&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;序号&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"> align</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;center&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//prop表示要展示的对应对象中的键名即可填入数据    width属性来定义列宽</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column prop</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrName&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;属性名称&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;150&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column prop</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;prop&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;属性值列表&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;width&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//{row,$index}row表示本列的具体数据，index表示序列</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">template slot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">scope</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;{row}&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//tag标签</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">tag type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;success&quot;</span><span class="token plain"> v</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrValue in row.attrValueList&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrValue.id&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;margin:0px 10px;&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">attrValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">valueName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">tag</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">template</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column prop</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;prop&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;操作&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;150&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">template slot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">scope</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;{}&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;warning&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;el-icon-edit&quot;</span><span class="token plain"> size</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;mini&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;danger&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;el-icon-delete&quot;</span><span class="token plain"> size</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;mini&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">template</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">card</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4点击添加属性及修改属性展示的静态结构的完成">4.点击添加属性及修改属性展示的静态结构的完成<a href="#4点击添加属性及修改属性展示的静态结构的完成" class="hash-link" aria-label="4.点击添加属性及修改属性展示的静态结构的完成的直接链接" title="4.点击添加属性及修改属性展示的静态结构的完成的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.设置一个属性值来控制结构的展示与隐藏，默认值true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.静态结构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div v-show=&quot;!isShowTable&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-form ref=&quot;form&quot; label-width=&quot;80px&quot; :inline=&quot;true&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-form-item label=&quot;属性名&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;el-input placeholder=&quot;请输入属性名&quot;&gt;&lt;/el-input&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/el-form-item&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-plus&quot;&gt;添加属性值&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-button @click=&quot;isShowTable=true&quot;&gt;取消&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-table style=&quot;width: 100%;margin:20px 0px&quot; border &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-table-column align=&quot;center&quot; type=&quot;index&quot; label=&quot;序号&quot; width=&quot;80&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-table-column prop=&quot;prop&quot; label=&quot;属性值名称&quot; width=&quot;width&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;el-table-column prop=&quot;prop&quot; label=&quot;操作&quot; width=&quot;width&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-table&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-button type=&quot;primary&quot;&gt;保存&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-button @click=&quot;isShowTable=true&quot;&gt;取消&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //点击两个取消时，展示平台属性管理结构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //点击添加属性及修改属性，展示上面的结构</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="5收集要带给服务器的数据属性名属性值三级id">5.收集要带给服务器的数据（属性名，属性值，三级id）<a href="#5收集要带给服务器的数据属性名属性值三级id" class="hash-link" aria-label="5.收集要带给服务器的数据（属性名，属性值，三级id）的直接链接" title="5.收集要带给服务器的数据（属性名，属性值，三级id）的直接链接">​</a></h5><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">1.</span><span class="token plain">写请求api，以及在组件的data中写好要传递给服务器的参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//收集添加属性||修改属性需要用到的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">attrInfo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">attrName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//属性名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//属性值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">attrValueList</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">categoryId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//三级id的id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">categoryLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//返回给数据库的id是几级id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2.</span><span class="token plain">收集属性名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//:model 表示把数据收集到attrInfo中      v-model 表示把输入的属性名收集到attrInfo.attrName中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form ref</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;form&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;80px&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">inline</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrInfo&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">item label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;属性名&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">input placeholder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;请输入属性名&quot;</span><span class="token plain"> v</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrInfo.attrName&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">input</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">form</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3.</span><span class="token plain">收集属性值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//:data 表示将数据收集到attrInfo.attrValueList中   </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//使用自定义插槽v-model收集写在input的数据作为属性值保存在valueName中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table style</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;width: 100%; margin: 20px 0px&quot;</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">border</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;attrInfo.attrValueList&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column align</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;center&quot;</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;index&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;序号&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column prop</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;prop&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;属性值名称&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;width&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">template slot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">scope</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;{row}&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">input v</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;row.valueName&quot;</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;请输入属性值名称&quot;</span><span class="token plain"> size</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;mini&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">input</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">template</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column prop</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;prop&quot;</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;操作&quot;</span><span class="token plain"> width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;width&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">template slot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">scope</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;{row,$index}&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;danger&quot;</span><span class="token plain"> size</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;mini&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;el-icon-delete&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @click</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;deleteAttrValue(row,$index)&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">template</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">column</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">el</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4.</span><span class="token plain">点击添加属性值时，push一个对象给attrValueList，就会在属性值结构上多一个input框，可以收集多个属性值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//添加属性值的回调</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">addAttrValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrValueList</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">attrId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//属性值是属于哪个属性名下的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">valueName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//属性值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">:</span><span class="token plain">disabled</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&quot;</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">attrInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrName</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//没有attrName时不能点击添加属性值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5.</span><span class="token plain">在写要添加的属性值的时候点击取消，再次添加属性时，上一次写的属性名值回显的问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//在点击添加属性按钮时</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">addAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//attr表格的显示与隐藏</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isShowTable</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//清除点击取消时，上一次的数据回显的操作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//在点击添加属性时，组件中的三级id已经有了，所以可以在这里收集到带给服务器要用的三级id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">attrInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">attrName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">attrValueList</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">categoryId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">category3Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">categoryLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="6点击修改按钮要做的事">6.点击修改按钮要做的事<a href="#6点击修改按钮要做的事" class="hash-link" aria-label="6.点击修改按钮要做的事的直接链接" title="6.点击修改按钮要做的事的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.点击修改按钮的时候，将原有的数据都展示在修改的结构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//修改某一个属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateAttr(row){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.isShowTable = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //将选中的属性赋值给attrInfo,让需要修改的属性在修改界面展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //由于attrInfo的数据结构比较复杂，使用浅拷贝的话，对象里面的数组在点击取消的时候还是会修改，所以这里要使用到深拷贝</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.attrInfo = cloneDeep(row)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.修改属性值的时候，点击添加属性值时，这时的attrId就是有值的，要将原有的id赋值给新添加的属性值的attrId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //添加属性值的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addAttrValue(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.attrInfo.attrValueList.push({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //attrId:属性值是属于哪个属性名下的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //对于修改某一个属性的时候，可以在已有的属性值基础上新增新的属性值（新增新的属性值的时候，要把已有的属性的id带上，         如果没有那就还是undefined）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            attrId: this.attrInfo.id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            valueName: &quot;&quot;,//属性值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3.点击属性值的input时，展示input框，失焦或者点击enter键时展示span</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //这里要使用一个标签来控制input和span的展示与隐藏，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //这里的标签不能在data中，因为这样所有的input都会通过这一个标签控制展示隐藏</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //所以这里要在每个属性值身上都添加一个标签，来控制当前input框的显示与隐藏</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //在点击添加属性值的时候，多加一个属性 flag:true 表示当前属性值的input和span是显示还是隐藏</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;el-input v-if=&quot;row.flag&quot; @blur=&quot;row.flag=false&quot; @keyup.native.enter=&quot;row.flag=false&quot;&gt;&lt;/el-input&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;span v-else @click=&quot;row.flag=true&quot; style=&quot;display:block&quot;&gt;{{row.valueName}}&lt;/span&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="7编辑模式与查看模式的转换以及属性值的表单验证">7.编辑模式与查看模式的转换，以及属性值的表单验证<a href="#7编辑模式与查看模式的转换以及属性值的表单验证" class="hash-link" aria-label="7.编辑模式与查看模式的转换，以及属性值的表单验证的直接链接" title="7.编辑模式与查看模式的转换，以及属性值的表单验证的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//从编辑模式变成查看模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    toLook(row){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //row：是用户最新添加的属性值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //要对用户写入input中的数据进行校验：1.不能是空串 2.不能和之前写过的重复</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (row.valueName.trim()==&#x27;&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$message(&#x27;请你输入一个正常的属性值&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //判断用户新增的和之前的属性值是否一样</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let isRepat = this.attrInfo.attrValueList.some(item=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //这里是需要将刚写入的属性值从判断中去除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(item != row){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return item.valueName == row.valueName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (isRepat) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$message(&#x27;请你输入一个正常的属性值&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果都成立才将编辑模式变成查看模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      row.flag = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//但是在修改已有的数据的时候，数据上并没有flag，所以要在点击修改按钮的时候，把该属性添加为响应式数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//在修改某个属性的时候，由于其没有flag这个属性，不能进行编辑模式和查看模式的切换，所以要添加上响应式的flog标记</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.attrInfo.attrValueList.forEach(item=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //不能直接item.flag=false  这样绑定的不是响应式的数据，无法进行切换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //$set:第一个参数：添加在哪个对象身上，第二个属性：添加的属性名，第三个：添加的属性值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$set(item,&#x27;flag&#x27;,false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="8在查看模式转换为编辑模式input自动聚焦">8.在查看模式转换为编辑模式，input自动聚焦<a href="#8在查看模式转换为编辑模式input自动聚焦" class="hash-link" aria-label="8.在查看模式转换为编辑模式，input自动聚焦的直接链接" title="8.在查看模式转换为编辑模式，input自动聚焦的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//点击span，查看模式变为编辑模式，自动聚焦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    toEdit(row,index){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //查看模式变成编辑模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      row.flag=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取到input，自动聚焦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //给input打ref，但是由于会有多个input出现，所以ref的值也不能相同，所以要使用:ref=&#x27;$index&#x27;，用其索引值作为ref值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //这里如果直接获取input，会获取不到，因为页面渲染input也需要时间，查看模式刚刚变为编辑模式，就获取input就会undefined</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$nextTick(()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取相应的input，自动聚焦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$refs[index].focus()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //添加新增属性的时候input自动聚焦，由于input打的标记是索引值，所以在新增属性的时候，新增属性的input的ref就会是数组长度减1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> this.$nextTick(()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$refs[this.attrInfo.attrValueList.length-1].focus()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="9删除属性值的操作">9.删除属性值的操作<a href="#9删除属性值的操作" class="hash-link" aria-label="9.删除属性值的操作的直接链接" title="9.删除属性值的操作的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//在点击删除按钮时，出现一个气泡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-popconfirm :title=&quot;`确定删除${row.valueName}?`&quot; @onConfirm=&quot;deleteAttrValue($index)&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-button type=&quot;danger&quot; slot=&quot;reference&quot; size=&quot;mini&quot; icon=&quot;el-icon-delete&quot; &gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//点击确定的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//删除属性值的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deleteAttrValue(index) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.attrInfo.attrValueList.splice(index, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="10点击保存按钮">10.点击保存按钮<a href="#10点击保存按钮" class="hash-link" aria-label="10.点击保存按钮的直接链接" title="10.点击保存按钮的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//点击保存按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async addOrUpdateAttr(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //整理参数：1.过滤掉用户写的属性值为空的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //2.删除flag字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.attrInfo.attrValueList=this.attrInfo.attrValueList.filter(item=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果item的属性值不是空</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(item.valueName!=&#x27;&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //删除该item的flag字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          delete item.flag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await this.$API.attr.reqAddOrUpdateAttr(this.attrInfo)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //展示table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.isShowTable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //展示保存成功的标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$message({type:&#x27;success&#x27;,message:&#x27;保存成功&#x27;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //重新获取服务器数据，进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getAttrList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="11按钮与三级联动的可操作性">11.按钮与三级联动的可操作性<a href="#11按钮与三级联动的可操作性" class="hash-link" aria-label="11.按钮与三级联动的可操作性的直接链接" title="11.按钮与三级联动的可操作性的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//在添加||修改属性界面，三级联动不可以被操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//在属性值没有值时，保存按钮不可以被操作</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3spu模块">3.SPU模块<a href="#3spu模块" class="hash-link" aria-label="3.SPU模块的直接链接" title="3.SPU模块的直接链接">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1静态组件">1.静态组件<a href="#1静态组件" class="hash-link" aria-label="1.静态组件的直接链接" title="1.静态组件的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.三级联动</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-card style=&quot;margin: 20px 0px&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!-- 三级分类列表 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;CategorySelect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @getCategoryId=&quot;getCategoryId&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :show=&quot;!show&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &gt;&lt;/CategorySelect&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/el-card&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     getCategoryId({ categoryId, level }) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (level == 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.category1Id = categoryId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.category2Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.category3Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else if (level == 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.category2Id = categoryId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.category3Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.category3Id = categoryId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //发请求获取数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getSpuList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.SPU列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 添加SPU按钮 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-plus&quot;&gt;添加SPU&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- SPU列表 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-table style=&quot;width: 100%&quot; border&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-table-column type=&quot;index&quot; label=&quot;序号&quot; width=&quot;80&quot; align=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-table-column prop=&quot;prop&quot; label=&quot;SPU名称&quot; width=&quot;width&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-table-column prop=&quot;prop&quot; label=&quot;SPU描述&quot; width=&quot;width&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-table-column prop=&quot;prop&quot; label=&quot;操作&quot; width=&quot;width&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;template slot-scope=&quot;{row,$index}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;el-button type=&quot;success&quot; icon=&quot;el-icon-plus&quot; size=&quot;mini&quot;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-edit&quot; size=&quot;mini&quot;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;el-button type=&quot;info&quot; icon=&quot;el-icon-info&quot; size=&quot;mini&quot;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; size=&quot;mini&quot;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/el-table-column&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-table&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!--         @size-change=&quot;handleSizeChange&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @current-change=&quot;handleCurrentChange&quot; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;el-pagination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        align=&quot;center&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :current-page=&quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :page-sizes=&quot;[3, 5, 7]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :page-size=&quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        layout=&quot;prev, pager, next, jumper,-&gt;,sizes,total&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :total=&quot;33&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/el-pagination&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2获取spu列表动态展示">2.获取spu列表，动态展示<a href="#2获取spu列表动态展示" class="hash-link" aria-label="2.获取spu列表，动态展示的直接链接" title="2.获取spu列表，动态展示的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.写请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//获取spu列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqSpuList = (page,limit,category3Id)=&gt;request({url:`/admin/product/${page}/${limit}`,method:&#x27;get&#x27;,params:{category3Id}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.在三级id获取到的时候，携带参数发送请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //发请求获取spu列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async getSpuList(pager = 1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.page = pager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const {page,limit,category3Id} = this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let res = await this.$API.spu.reqSpuList(page,limit,category3Id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.total = res.data.total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.records = res.data.records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.获取到数据，保存在data中，在表单中动态展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-table style=&quot;width: 100%&quot; border :data=&quot;xxx&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//分页器，也是一样，动态获取页码数，每页展示的数量，修改页码数的回调，修改每页展示数据的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.封装一个hintButton，鼠标移入按钮的时候会显示详情</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;a :title=&#x27;title&#x27; style=&quot;margin:10px&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;el-button v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name:&#x27;HintButton&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props:[&#x27;title&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//在main.js中注册为全局组件，在该使用的地方使用，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;hint-button type=&quot;success&quot; icon=&quot;el-icon-plus&quot; size=&quot;mini&quot; tittle=&#x27;添加sku&#x27;&gt;&lt;/hint-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-edit&quot; size=&quot;mini&quot; title=&#x27;修改spu&#x27;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-button type=&quot;info&quot; icon=&quot;el-icon-info&quot; size=&quot;mini&quot; title=&#x27;查看当前spu全部的sku列表&#x27;&gt;&lt;/el-button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; size=&quot;mini&quot; title=&#x27;删除spu&#x27;&gt;&lt;/el-button&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>****</strong>不理解这里为什么只有第一个变成了<strong>hint-button<strong><strong><strong>****</strong></strong></strong></strong></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3动态展示spu列表添加修改spu添加sku">3.动态展示SPU列表||添加修改spu||添加sku<a href="#3动态展示spu列表添加修改spu添加sku" class="hash-link" aria-label="3.动态展示SPU列表||添加修改spu||添加sku的直接链接" title="3.动态展示SPU列表||添加修改spu||添加sku的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">使用一个响应式数据 isShow 来控制展示的是哪一个</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">isShow:0, //0:展示spu列表   1 添加|修改spu   2：添加sku</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">由于这里的结构会很多，所以把1和2注册为子组件  引入子组件，注册子组件，使用子组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;SpuForm v-show=&quot;isShow == 1&quot;&gt;&lt;/SpuForm&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;SkuForm v-show=&quot;isShow == 2&quot;&gt;&lt;/SkuForm&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4修改spu列表">4.修改SPU列表<a href="#4修改spu列表" class="hash-link" aria-label="4.修改SPU列表的直接链接" title="4.修改SPU列表的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.静态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.在点击修改按钮的时候，也要发请求获取到spu数据，图片，品牌信息，销售属性进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    所以要在子组件上打ref，使得可以在父组件中也可以获取到子组件的信息，就可以在点击修改按钮的时候，让子组件发请求获取数据进行展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//父组件中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;SpuForm v-show=&quot;isShow == 1&quot; ref=&quot;spu&quot;&gt;&lt;/SpuForm&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //修改spu的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateSpu(row,$index){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.isShow = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$refs.spu.initSpuForm(row)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//子组件中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">initSpuForm(row){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      console.log(&#x27;faqingqiu&#x27;,row);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.写api接口，在点击修改按钮的时候，发请求，获取数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async initSpuForm(row){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取spu数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let spuRes = await this.$API.spu.reqSpu(row.id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (spuRes.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.spu = spuRes.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取品牌信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let tradeMarkRes = await this.$API.spu.reqTradeMarkList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (tradeMarkRes.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.tradeMarkList = tradeMarkRes.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取spu图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let spuImageRes = await this.$API.spu.reqSpuImageList(row.id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (spuImageRes.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.spuImageList = spuImageRes.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取销售属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let saleAttrRes = await this.$API.spu.reqBaseSaleAttrList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (saleAttrRes.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.saleAttrList = saleAttrRes.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 4.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/7-Vue项目笔记/2-后台管理系统知识点.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Vue项目笔记/电商项目知识点"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">电商项目知识点</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1品牌管理" class="table-of-contents__link toc-highlight">1.品牌管理</a></li><li><a href="#2商品管理attr" class="table-of-contents__link toc-highlight">2.商品管理（attr）</a></li><li><a href="#3spu模块" class="table-of-contents__link toc-highlight">3.SPU模块</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1d17331b.js"></script>
<script src="/assets/js/main.e91e50e7.js"></script>
</body>
</html>