<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Vue项目笔记/电商项目知识点">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">电商项目知识点 | Fangs-Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fangs7.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fangs7.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fangs7.github.io/docs/Vue项目笔记/电商项目知识点"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="电商项目知识点 | Fangs-Blog"><meta data-rh="true" name="description" content="1.在main.js 文件中引入全局组件，，，import.......  还要用上 Vue.component(全局组件的名字（XXXX.name）,哪一个组件（XXXX）)"><meta data-rh="true" property="og:description" content="1.在main.js 文件中引入全局组件，，，import.......  还要用上 Vue.component(全局组件的名字（XXXX.name）,哪一个组件（XXXX）)"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fangs7.github.io/docs/Vue项目笔记/电商项目知识点"><link data-rh="true" rel="alternate" href="https://fangs7.github.io/docs/Vue项目笔记/电商项目知识点" hreflang="zh"><link data-rh="true" rel="alternate" href="https://fangs7.github.io/docs/Vue项目笔记/电商项目知识点" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Fangs-Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Fangs-Blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce8626c7.css">
<link rel="preload" href="/assets/js/runtime~main.1d17331b.js" as="script">
<link rel="preload" href="/assets/js/main.8f358769.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/1.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/1.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">我的网站</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/js">JavaScript</a><a class="navbar__item navbar__link" href="/node.js">Node.js笔记</a><a class="navbar__item navbar__link" href="/ServerNotes">Node搭建简单服务器接口</a><a class="navbar__item navbar__link" href="/ajax">Ajax&amp;Axios</a><a class="navbar__item navbar__link" href="/webpack">git&amp;Webpack</a><a class="navbar__item navbar__link" href="/vue">Vue2</a><a class="navbar__item navbar__link" href="/echarts">Vue</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Vue项目笔记/电商项目知识点">Vue项目笔记</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Vue项目笔记/电商项目知识点">电商项目知识点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Vue项目笔记/后台管理系统知识点">一、登录业务（跨域问题修改配置）</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Vue项目笔记</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">电商项目知识点</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>电商项目知识点</h1></header><p>1.在main.js 文件中引入全局组件，，，import.......  还要用上 Vue.component(全局组件的名字（XXXX.name）,哪一个组件（XXXX）)
全局组件使用时不需要再次引入</p><p>第一次发送axios请求一般都在mounted生命周期函数中进行</p><p>三级列表优化：app组件的mounted函数只执行一次，所以三级列表的数据放在app组件中就可以避免home和search组件来回跳转重复发请求</p><p>在css中使用@/....，在@前面要加上~ 小波浪（shift+esc下面那个）</p><p>assets文件夹是放所有组件共用的静态资源</p><h1>2.要解决跨域问题（使用代理服务器）</h1><p>​	在vue.config.js文件中配置</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    devServer:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              proxy:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;/api&#x27;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          target:&#x27;http://gmall-h5-api.atguigu.cn&#x27;//这里写上服务器的地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>3.nprogress进度条（浏览器中的进度条）</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.下载npm i --save nprogress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.引入进度条 start：进度条开始     done：进度条结束</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.引入进度条的样式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.在请求拦截器中   nProgress.start()  进度条开始</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    在响应拦截器中  nProgress.done()   进度条结束</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>4.防抖与节流</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    防抖：前面的所有的触发都被取消，最后一次执行 在规定的时间之后才会触发，也就是说如果快速的触发 只会执行一次</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    节流：在规定的间隔时间范围内不会重复触发回调，只有大于这个时间间隔才会触发回调，把频繁触发变成少量触发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lodash插件：里面封装了函数的防抖与节流业务 【闭包+延迟器】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1.lodash函数库向外暴露了 _函数    _.debounce（fun,时间（ms））     //防抖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      _.throttle(fun(){},时间)        //节流</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​					<br>
<!-- -->​		按需加载：
​			import throttle from &#x27;lodash/throttle.js&#x27;
​			或者import debounce from &#x27;loadsh/debounce.js&#x27;
​
​			事件名：throttle/debounce(fun(){},时间)</p><h1>5.三级联动跳转页面，以及跳转带参数的问题</h1><p>​		不要用 router-link   会出现卡顿现象</p><p>解决办法：	<strong>这里gosearch方法绑定的是三级联动的父标签，用事件委派来避免多个标签绑定事件</strong></p><p>在a标签上绑定自定义属性：  :data-xxxx=xxxx    //这里绑定的自定义标签如果是小驼峰形式的，那么调用dataset方法时会变成小写形式</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//将全部的子节点的事件委派给父节点-&gt;事件回调就一个</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goSearch(event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //第一个问题:div父节点子元素太多【h3、h2、em、dt、dd、dl...a】？你怎么知道你点击的一定是a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //第二个问题:要区分一级分类、二级分类、三级分类的a标签【category1Id|category2Id|category2Id】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //解决方法：1.将a标签绑定自定义属性，点击的标签身上如果有那个自定义属性就一定是a标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //  2.绑定自定义属性，123id和name用于区分123级id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let targetNode = event.target;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //节点上有一个dataset属性，可以获取到节点的自定义属性和属性值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let {categoryname, category1id, category2id, category3id} = targetNode.dataset;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果有name属性，就一定是a标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (categoryname) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //点击只要是a,就是往search模块跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var locations = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: &quot;search&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          query: { categoryName: categoryname },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //一级分类的a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (category1id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          locations.query.category1Id = category1id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else if (category2id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //二级分类的a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          locations.query.category2Id = category2id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //三级分类的a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          locations.query.category3Id = category3id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //点击商品分类按钮的时候,如果路径当中携带params参数,需要合并携带给search模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (this.$route.params.keyword) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          locations.params = this.$route.params;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //目前商品分类这里携带参数只有query参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$router.push(locations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>6.params相关问题</h1><p><strong>经典面试题1</strong>：编程式导航进行路由跳转的时候，path写法是否可以结合parmas参数一起使用</p><p>答：不可以。path这些写法不能结合params参数一起传递</p><p><strong>经典面试题2</strong>：如何操作params 参数可以传递也可以不传递的写法？</p><p>答：在路由当中params后面加上一个？，代表的是params参数可以传递，曲可以不传递</p><p><strong>经典面试题3</strong>：params参数可以传递|或者不传递，但是我就是传递params參数，但是我传递的是一个空字符串？
答：用undefined解次这类问题</p><p><strong>经典面试题4</strong>：路由能否给组件传递props
答：能：布尔值、对象、函数
下面这种写法可以解决当前这个抛出异常错误的问题，但是将来我们还是会用到pushlreplace方法进行路由跳转，还是会出现此类问题
因此我们需要从”根&quot;解决这个问题，就是咱们自己重写push ll replace方法,push l replace方法是VueRouter.prototype原型对象上面的方法</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//将VueRouter原型对象上面的push replace方法拷贝一份</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let copyPush = VueRouter.prototype.push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let copyReplace = VueRouter.prototype.replace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//重写push replace方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//第一个参数：传递的参数（name，path，query，params等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//第二个参数：成功的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//第三个参数：失败的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VueRouter.prototype.push = function(location,resolve,reject,){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(resolve&amp;&amp;reject){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        copyPush.call(this,location,resolve,reject)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        copyPush.call(this,location,()=&gt;{},()=&gt;{})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VueRouter.prototype.replace = function(location,resolve,reject,){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(resolve&amp;&amp;reject){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        copyReplace.call(this,location,resolve,reject)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        copyReplace.call(this,location,()=&gt;{},()=&gt;{})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>7.参数合并</h1><p>在header组件，点击搜索按钮时</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        //搜索按钮的回调函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        goSearch(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //如果有query 带着</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(this.$route.query){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                let location = {name:&#x27;search&#x27;,params:{keyword:this.keyword || undefined}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                location.query = this.$route.query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.$router.push(location)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在三级联动组件中</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        //如果有params 带着</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if(this.$route.params){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            location.params = this.$route.params</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            location.query = query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$router.push(location)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>8.mock模拟数据</h1><p>1:mockjs模块实现模拟数据</p><p>---对于将来实际工作的时候，后台没有准备好接口（服务器没有开发出来），前端工程师可以利用mock技术，</p><p>实现模拟数据，将来项目上线（后台真实接口）写好了，替换为真实接口即可。</p><p>---对于咱们而言，后台老师确实没有给首页中轮播这部分的接口，mock数据，你可以当中一个真实接口就行了。</p><p>上线的时候，对于mock数据对于项目而言没有任何影响。</p><p>对于项目而言:真实的接口 /api/xxxx   模拟的数据/mock/xxxx</p><p>模拟数据JSON：没有空格，最好使用格式化插件进行格式化。</p><p>使用步骤：</p><p>​	1.在项目的src文件夹中创建一个mock文件夹</p><p>​	2.把准备的json数据（mock文件夹中创建相应的json文件）-------格式化一下，别有空格（会跑不起来）</p><ol start="3"><li>把mock需要的图片放在public文件夹中【public文件夹在打包的时候，会把相应的资源原封不动的打包到dist文件夹中】</li><li>创建mockServer.Js通过mock.js插件实现模拟数据</li><li>mockServer.js文件在入口文件夹中引入（至少引入一次，才能模拟数据）</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//引入mockjs插件开始模拟数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Mock from &#x27;mockjs&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//引入数据：JSON数据格式数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//比如:图片资源、JSON资源【里面不能书写export关键字】，这些资源默认对外暴露【默认暴露】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import banner from &#x27;./banner.json&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import floor from &#x27;./floor.json&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//接口:相当于nodejs里面中间件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//第一个参数：接口的地址 第二个参数:向这个接口发请求获取到的数据 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//Mock插件：中间件默认是GET请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mock.mock(&quot;/mock/banner&quot;, { code: 200, data: banner });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//Mock插件：中间件默认是GET请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mock.mock(&#x27;/mock/floor&#x27;, { code: 200, data: floor });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//使用的时候记得引入mock的数据</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>9.swiper轮播图插件</h1><p>​	swiper插件：经常制作轮播图（移动端||pc端都可以使用）</p><p>​	使用步骤：1.引入相应的依赖包（swiper.js || swiper.css）</p><p>​						2.页面中的结构务必要有</p><p>​						3.初始化swiper实例，给轮播图添加动态效果</p><p>css文件可以直接在main.js中直接引用（避免了多个组件使用swiper重复引用的问题）</p><h1>10.swiper插件配合项目中的轮播图</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="第一种解决方案">第一种解决方案，<a href="#第一种解决方案" class="hash-link" aria-label="第一种解决方案，的直接链接" title="第一种解决方案，的直接链接">​</a></h3><p>延迟器（不是完美的解决方案     但是这种解决方案存在风险（无法确定用户请求到底需要多长时间），因此没办法确定延迟器时间。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2swiper在vue项目中使用完美解决方案">2:Swiper在Vue项目中使用完美解决方案<a href="#2swiper在vue项目中使用完美解决方案" class="hash-link" aria-label="2:Swiper在Vue项目中使用完美解决方案的直接链接" title="2:Swiper在Vue项目中使用完美解决方案的直接链接">​</a></h3><p>第一种解决方案问题出现在哪里：v-for,在遍历来自于Vuex（数据:通过ajax向服务器发请求，存在异步）</p><p>watch:监听属性，watch可以检测到属性值的变化，当属性值发生变化的时候，可以出发一次。</p><p>Vuex当中的仓库数据bannerList（组件在使用）：
bannerList仓库数据有没有发生过变化？
一定是有的：bannerList初始值空数组，当服务器的数据返回以后，它的bannerList存储的属性值会发生变化【变为服务器返回的数据】
组件实例在使用仓库中的bannerList，组件的这个属性bannerList一定是发生过变化，watch可以监听到。</p><p>组件实例的一个方法:$nextTick
this.$nextTick(()=&gt;{</p><p>})
nextTick官网解释:
在下次DOM更新, 循环结束之后,执行延迟回调。在 修改数据之后 立即使用这个方法，获取更新后的DOM。
注意：组件实例的$nextTick方法，在工作当中经常使用，经常结合第三方插件使用，获取更新后的DOM节点</p><p>总结:
1:Swiper插件工作的是很常用（今晚把API、基本使用方法）看看
2:组件实例的$nextTick方法。
在下次DOM更新, 循环结束之后,执行延迟回调。在 修改数据之后 立即使用这个方法，获取更新后的DOM</p><p>监听可以保证服务器的数据已经返回，但是不能保证遍历结束，所以要使用$nextTick来保证页面渲染结束之后初始化swiper</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  watch: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      immediate: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      handler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$nextTick(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          var mySwiper = new Swiper(&quot;.swiper-container&quot;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            loop: true, // 循环模式选项</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 如果需要分页器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pagination: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              el: &quot;.swiper-pagination&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              clickable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 如果需要前进后退按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            navigation: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              nextEl: &quot;.swiper-button-next&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              prevEl: &quot;.swiper-button-prev&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 如果需要滚动条</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            scrollbar: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              el: &quot;.swiper-scrollbar&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>11.开发floor组件</h1><p>1.getFloorList这个action在哪里触发，是需要在home组件当中触发的，不能在floor组件内部触发，因为返回的是两个floor，需要v-for遍历floor组件</p><p>2.v-for也可以在自定义标签当中使用</p><h1>12.将轮播图拆分为一个公用的全局组件</h1><p>切记：以后在开发项目的时候，如果看到某一个组件在很多地方都在使用，就可以把它变成全局组件，注册一次就可以在任意地方使用公用的组件||非路由组件放在components文件夹中</p><h1>13.search组件相关的问题</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="search组件动态获取数据">search组件动态获取数据<a href="#search组件动态获取数据" class="hash-link" aria-label="search组件动态获取数据的直接链接" title="search组件动态获取数据的直接链接">​</a></h3><p>1.先写axios请求（这次请求需要带参数）</p><p>2.vuex三件套</p><p>3.组件派发action请求，获取数据进行动态展示</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="根据不同参数动态获取数据进行展示">根据不同参数动态获取数据进行展示<a href="#根据不同参数动态获取数据进行展示" class="hash-link" aria-label="根据不同参数动态获取数据进行展示的直接链接" title="根据不同参数动态获取数据进行展示的直接链接">​</a></h3><p>​	1.设置一个空对象searchParams</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2. 通过assign方法将searchParams 和获取的路由参数进行匹配覆盖    后面两个的属性会把第一个的属性值覆盖掉    Object.assign(*this*.searchParams,*this*.$route.query,*this*.$route.params)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>在beforeMount函数中再将searchParams传递给封装好的axios请求，让服务器动态返回数据进行展示</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="点击三级列表或者进行搜索获取数据">点击三级列表或者进行搜索获取数据<a href="#点击三级列表或者进行搜索获取数据" class="hash-link" aria-label="点击三级列表或者进行搜索获取数据的直接链接" title="点击三级列表或者进行搜索获取数据的直接链接">​</a></h3><p>但是这里只会在mounted 组件挂载完毕之后执行一次，后续再想要再次点击三级列表或者进行搜索也不会返回数据</p><p>所以解决办法：</p><p>​							watch监听路由信息，如果信息修改则重新整理带给服务器的参数，再次发起请求，但是如果再点击一级二级id则不会将						上一次点击的id覆盖掉，所以要在请求发送完毕之后置空上次发送的123级id</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  watch: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $route() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Object.assign(this.searchParams, this.$route.query, this.$route.params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.category1Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.category2Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.category3Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="处理面包屑问题">处理面包屑问题<a href="#处理面包屑问题" class="hash-link" aria-label="处理面包屑问题的直接链接" title="处理面包屑问题的直接链接">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="三级列表生成的面包屑">三级列表生成的面包屑<a href="#三级列表生成的面包屑" class="hash-link" aria-label="三级列表生成的面包屑的直接链接" title="三级列表生成的面包屑的直接链接">​</a></h5><p>1.v-if显示隐藏面包屑   给x设置点击监听</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;li class=&quot;with-x&quot; v-if=&quot;searchParams.categoryName&quot;&gt;{{ searchParams.categoryName}}&lt;i @click=&quot;removeCategoryName&quot;&gt;x&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/li&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.点击x 的时候先把上次带过来的参数置空（也可以设置为undefined，这样当前的字段就不会再带给服务器）</p><p>​	再次请求，但是这时的浏览器地址栏还是会存在上一次带过来的query参数，为了避免不删除params参数，可以判断如果有params参数	则将params参数继续带着进行push跳转，没有则直接跳转。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">removeCategoryName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.categoryName = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.category1Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.category2Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.category3Id = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (this.$route.params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$router.push({ name: &quot;search&quot;, params: this.$route.params });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="关键字生成的面包屑">关键字生成的面包屑<a href="#关键字生成的面包屑" class="hash-link" aria-label="关键字生成的面包屑的直接链接" title="关键字生成的面包屑的直接链接">​</a></h5><p><strong><u>1.关键字生成的面包屑和上面类似，区别就是要清除搜索栏中的文字，方法是通过全局事件总线绑定一个事件给header组件清除</u></strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    removeKeyword() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.keyword = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$bus.$emit(&quot;clearKeyword&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (this.$route.query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$router.push({ name: &quot;search&quot;, query: this.$route.query });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="品牌生成的面包屑">品牌生成的面包屑<a href="#品牌生成的面包屑" class="hash-link" aria-label="品牌生成的面包屑的直接链接" title="品牌生成的面包屑的直接链接">​</a></h5><p>​	1.先使用自定义事件将子组件中的数据返回</p><p>​	2.将返回的数据进行整合</p><p>​	3.动态的在页面中进行展示</p><p>​	4.给x设置点击监听</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    trademarkInfo(trademark) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.trademark = `${trademark.tmId}:${trademark.tmName}`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    removeTradeMark() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.trademark = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="商品参数生成的面包屑这里的数据要放在数组里">商品参数生成的面包屑（这里的数据要放在数组里）<a href="#商品参数生成的面包屑这里的数据要放在数组里" class="hash-link" aria-label="商品参数生成的面包屑（这里的数据要放在数组里）的直接链接" title="商品参数生成的面包屑（这里的数据要放在数组里）的直接链接">​</a></h5><p>​	1.先使用自定义事件将子组件中的数据返回</p><p>​	2.将返回的数据进行整合</p><p>​	3.动态的在页面中进行展示（所以要使用v-for进行遍历数组内所有的参数，而不是v-if进行展示）</p><p>​	4.给x设置点击监听（这里不是要把searchparams的属性置空，而是要删除props数组的内容）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">attrInfo(attr, attrValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let props = `${attr.attrId}:${attrValue}:${attr.attrName}`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (this.searchParams.props.indexOf(props) == -1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.searchParams.props.push(props);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    removeAttr(index) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.props.splice(index, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="排序问题">排序问题<a href="#排序问题" class="hash-link" aria-label="排序问题的直接链接" title="排序问题的直接链接">​</a></h3><p>问题：1.order属性的属性值有多少种写法	1：asc 		1：desc 	2：asc		2：desc</p><p>2.谁应该有类名：通过order属性值当中是包含1还是2</p><p>3.谁应该有箭头：谁有类名谁就有箭头</p><p>4.箭头用什么制作</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;li :class=&quot;{ active: isOne }&quot; @click=&quot;changeOrder1&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;a&gt;综合&lt;span class=&quot;iconfont&quot; :class=&quot;{ &#x27;icon-downswing&#x27;: isDesc, &#x27;icon-up&#x27;: isAsc }&quot; v-show=&quot;isOne&quot; &gt;&lt;/span&gt;&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;li :class=&quot;{ active: isTwo }&quot; @click=&quot;changeOrder2&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;a&gt;价格&lt;span class=&quot;iconfont&quot; :class=&quot;{ &#x27;icon-downswing&#x27;: isDesc, &#x27;icon-up&#x27;: isAsc }&quot; v-show=&quot;isTwo&quot;&gt;&lt;/span&gt;&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/li&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​				给两个li标签加上动态的class属性，计算出isone，istwo，isasc，isdesc，如果searchparams中的order属性中有1则给综合展示属性，反之给价格展示，箭头也是   谁有类名给谁展示，</p><p>​				箭头使用阿里标签，复制在线css链接要在前面加上https：，还有使用class时前面要加上iconfont 也是如果order中有asc属性		就展示向上的箭头，</p><p>​				然后就是给li标签添加点击监听（两种方式）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    changeOrder1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (this.isDesc) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.searchParams.order = &quot;1:asc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.searchParams.order = &quot;1:desc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changeOrder2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (this.searchParams.order == &quot;1:desc&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.searchParams.order = &quot;2:desc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else if (this.isDesc) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.searchParams.order = &quot;2:asc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.searchParams.order = &quot;2:desc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    //排序回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //参数形式:1:desc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //1|2,标记flag,到底谁是高亮状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //asc|desc排序【sortType】,到底是升序还是降序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changeOrder(flag) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //flag：用户每一次点击的li标签的时候，用于区分是综合（1）还是价格（2）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //获取每一次order初始值,与用户点击传递进来的flag进行判断</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let originFlag = this.searchParams.order.split(&quot;:&quot;)[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let originSortType = this.searchParams.order.split(&quot;:&quot;)[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //准备一个新的数值，将来赋值给order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let newOrder = &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //点击的是不是同一个按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (flag == originFlag) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newOrder = `${originFlag}:${originSortType == &quot;desc&quot; ? &quot;asc&quot; : &quot;desc&quot;}`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //点击的不是同一个按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newOrder = `${flag}:desc`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //重新给order赋予新的数值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.order = newOrder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //重新发一次请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>14.分页器（重要重要重要！！！！！）（封装为全局组件）</h1><p><strong>1.分页器的逻辑</strong></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//接收到父组件传递过来的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;pageNo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pageSize&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;total&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;continues&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//依次为  当前页，每页的个数，总个数，连续页码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">computed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//总页数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">totalPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//计算出总页数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">ceil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">total</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">pageSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">startNumAndEndNum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> pageNo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> totalPage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> continues </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//如果总页数小于连续的页码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">totalPage </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> continues</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> totalPage</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//总页数大于连续的页码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pageNo </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">continues </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pageNo </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">continues </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//start存在负数，即当前页面是1或者2的时候</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">start </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> continues</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//end大于总页码的时候，即当前页码是总页码或者总页码的前一个时</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">end </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> totalPage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> totalPage </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> continues </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> totalPage</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> end </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.<strong>配置传给分页器的数据</strong>，<strong>并通过自定义事件获取到当前页码</strong>（这里total要通过mapstate在仓库中获取到）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;FsPagination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :pageNo=&quot;searchParams.pageNo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :pageSize=&quot;searchParams.pageSize&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :total=&quot;total&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :continues=&quot;5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @getPageNo = &#x27;getPageNo&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>3.给分页器结构绑定事件传递当前页码以及在什么情况下什么按钮的显示与隐藏</strong></p><p>​	:disable = ‘ ’  动态给这个按钮添加不能点击事件，如果满足后面的逻辑则不能点击</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button :disabled=&quot;pageNo == 1&quot; @click=&quot;$emit(&#x27;getPageNo&#x27;, pageNo - 1)&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      上一页</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button v-show=&quot;pageNo &gt; 3&quot; @click=&quot;$emit(&#x27;getPageNo&#x27;, 1)&quot; :class=&quot;{active:pageNo == 1}&quot;&gt;1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button v-show=&quot;pageNo &gt; 4&quot;&gt;···&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 中间部分 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      v-for=&quot;page in startNumAndEndNum.end&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :key=&quot;page.index&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      v-show=&quot;page &gt;= startNumAndEndNum.start&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @click=&quot;$emit(&#x27;getPageNo&#x27;, page)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :class=&quot;{active:pageNo == page}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {{ page }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button v-show=&quot;startNumAndEndNum.end &lt; totalPage - 1&quot;&gt;···&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      v-show=&quot;startNumAndEndNum.end &lt; totalPage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :disabled=&quot;pageNo == totalPage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @click=&quot;$emit(&#x27;getPageNo&#x27;, totalPage)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      :class=&quot;{active:pageNo == totalPage}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {{ totalPage }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;$emit(&#x27;getPageNo&#x27;, pageNo + 1)&quot;&gt;下一页&lt;/button&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>4.父组件收到当前页码，对searchparams修改，再次发起请求</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    getPageNo(pageNo){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.searchParams.pageNo = pageNo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.getData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>15.详情页面</h1><p>第一步：静态界面</p><p>第二步：写请求</p><p>第三步：vuex</p><p>​	这里要使用getters简化数据，要在返回的数据后面加上 ||{}  否则会出现假报错		因为这里的goodsInfo初始值是一个空对象组件在获取数据展示的时候，返回undefined，要或一个空对象，当数据还没有获取到的时候返回，数据获取到了再进行替换  search组件同理</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">categoryView(state){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return state.goodsInfo.categoryView || {}（这里的空对象要根据数据是对象还是数组进行变化）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第四步：动态展示</p><p>​	使用mapGetters获取到数据进行动态展示</p><p>这里在给放大镜zoom组件传递数据的时候还是会出现上面类似的假报错，即服务器的数据还没有返回就在页面上展示，虽然不影响代码运行，但是会报红，解决方法：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//在父组件中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">computed：{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skuImageList(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.skuInfo.skuImageList || []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //然后再传递给子组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;Zoom :skuImageList = &#x27;skuImageList&#x27; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //在子组件中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> computed:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      objList(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.skuImageList[0] || {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //子组件动态展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;img :src=&quot;objList.imgUrl&quot; /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="售卖属性的class属性动态点击变化">售卖属性的class属性动态点击变化<a href="#售卖属性的class属性动态点击变化" class="hash-link" aria-label="售卖属性的class属性动态点击变化的直接链接" title="售卖属性的class属性动态点击变化的直接链接">​</a></h3><p>排他方法，即拿出ischecked所在的四个对象，把四个对象的ischecked全部为0，再把点击的那个对象设置为1</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//前面的是点击的对象，后面的是所有的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@click=&quot;changeIsChecked(spuSaleAttrValue,spuSaleAttr.spuSaleAttrValueList)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//事件监听</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changeIsChecked(saleAttrValue,arr){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        arr.forEach(item =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.isChecked = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //这里的item是spuSaleAttrValueList的两个中的一个</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // console.log(item);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        saleAttrValue.isChecked = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="放大镜zoom和imagelist组件">放大镜zoom和imageList组件<a href="#放大镜zoom和imagelist组件" class="hash-link" aria-label="放大镜zoom和imageList组件的直接链接" title="放大镜zoom和imageList组件的直接链接">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1点击哪个轮播图哪个轮播图就有高亮效果和上面的三级列表类似">1.点击哪个轮播图哪个轮播图就有高亮效果<strong>（和上面的三级列表类似）</strong><a href="#1点击哪个轮播图哪个轮播图就有高亮效果和上面的三级列表类似" class="hash-link" aria-label="1点击哪个轮播图哪个轮播图就有高亮效果和上面的三级列表类似的直接链接" title="1点击哪个轮播图哪个轮播图就有高亮效果和上面的三级列表类似的直接链接">​</a></h5><p>​	1.设置一个响应式数据，默认是0，当响应式数据和图片的索引值相等时，动态添加class属性</p><p>​	2.添加一个点击监听，传当前点击的图片的索引值，将响应式数据改成索引值</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;img :src=&quot;image.imgUrl&quot; :class=&quot;{active:currentIndex==index}&quot; @click=&quot;changeCurrentIndex(index)&quot; &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//设置的响应式数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentIndex:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//点击事件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changeCurrentIndex(index){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.currentIndex = index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2使用全局时间总线通知zoom组件展示点击的大图">2.使用全局时间总线通知zoom组件展示点击的大图<a href="#2使用全局时间总线通知zoom组件展示点击的大图" class="hash-link" aria-label="2.使用全局时间总线通知zoom组件展示点击的大图的直接链接" title="2.使用全局时间总线通知zoom组件展示点击的大图的直接链接">​</a></h5><p>​	1.在changeCurrentIndex事件中：this.$bus.$emit(&#x27;getIndex&#x27;,index)</p><p>​	2.在zoom组件中接收点击的图片索引值</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mounted(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.$bus.$on(&#x27;getIndex&#x27;,(index)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //index是imageList传递过来的索引值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //在data中配置一个响应式的数据imageIndex = 0，默认是第一张</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.imageIndex = index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //然后在设置展示的是第imageIndex张</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3放大镜效果">3.放大镜效果<a href="#3放大镜效果" class="hash-link" aria-label="3.放大镜效果的直接链接" title="3.放大镜效果的直接链接">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;spec-preview&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;img :src=&quot;objList.imgUrl&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 绑定鼠标移动事件的 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;event&quot; @mousemove=&quot;zoom&quot;&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;big&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;img :src=&quot;objList.imgUrl&quot; ref=&quot;bigImg&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 蒙版 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;mask&quot; ref=&quot;mask&quot;&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  zoom(event){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let mask = this.$refs.mask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let bigImg = this.$refs.bigImg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let left = event.offsetX - mask.offsetWidth/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let top = event.offsetY - mask.offsetHeight/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //约束蒙版移动的范围</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(left &lt;= 0) left = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(left &gt; mask.offsetWidth) left = mask.offsetWidth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(top &lt;= 0) top = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(top &gt; mask.offsetHeight) top = mask.offsetHeight</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //设置蒙版的top|left</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mask.style.left = left + &#x27;px&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mask.style.top = top + &#x27;px&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //设置大图的top|left</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bigImg.style.left = -2*left +&#x27;px&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bigImg.style.top = -2*top +&#x27;px&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="商品数加一减一以及用户输入数量">商品数加一减一以及用户输入数量<a href="#商品数加一减一以及用户输入数量" class="hash-link" aria-label="商品数加一减一以及用户输入数量的直接链接" title="商品数加一减一以及用户输入数量的直接链接">​</a></h3><p>​	1.设置一个响应式的数据skuNum，默认值是1</p><p>​	2.写+ - 的逻辑，小于1的时候不能再－</p><p>​	3.控制用户输入的文本</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;input autocomplete=&quot;off&quot; class=&quot;itxt&quot; v-model=&quot;skuNum&quot; @change=&quot;changeSkuNum&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a href=&quot;javascript:&quot; class=&quot;plus&quot; @click=&quot;skuNum++&quot;&gt;+&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a href=&quot;javascript:&quot; class=&quot;mins&quot; @click=&quot;skuNum&lt;=1 ? skuNum=1 : skuNum--&quot;&gt;-&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changeSkuNum(event){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //让用户输入的文本 * 1，如果是非法的那么就是 NaN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let val = event.target.value * 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果输入是非法的NaN或者是小于1的数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(isNaN(val)||val&lt;1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.skuNum = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果是合法的大于1的数，但是有小数的话就要进行取整</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.skuNum = Math.floor(val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>16.加入购物车成功组件</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在详情组件点击加入购物车按钮要添加的事件">在详情组件点击加入购物车按钮要添加的事件<a href="#在详情组件点击加入购物车按钮要添加的事件" class="hash-link" aria-label="在详情组件点击加入购物车按钮要添加的事件的直接链接" title="在详情组件点击加入购物车按钮要添加的事件的直接链接">​</a></h3><p>​	1.写api，给服务器发请求</p><p>​	2.给加入购物车按钮添加点击事件</p><p>​			1.先派发action请求，让仓库发请求（带着商品id和商品的数量）给服务器，让服务器写入购物车添加的商品信息，然后返回成功				或者失败给详情组件，若成功，进行路由跳转，若失败，告诉用户失败了</p><p>​			2.注册购物车组件，成功跳转</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> //仓库中    将产品加入购物车</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async addOrUpdateShopCart({commit},{skuId,skuNum}){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//由于给服务器发请求，前台将要写入的数据发给服务器，服务器并没有返回数据，只告诉前台操作成功或者失败，所以不用再存储数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqAddOrUpdateShopCart(skuId,skuNum)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;faile&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//组件中给按钮添加的点击事件    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async addOrUpdateShopCart(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //1.发请求，将产品信息写入服务器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //2.获取到仓库中返回的成功或者失败的信息，若成功，进行路由跳转，若失败，告诉用户失败了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      await this.$store.dispatch(&#x27;addOrUpdateShopCart&#x27;，{skuId:this.$route.params.skuId,skuNum:this.skuNum})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //成功跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$router.push({name:&#x27;shopcart&#x27;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //失败提醒</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="向加入购物车成功组件传递参数">向加入购物车成功组件传递参数<a href="#向加入购物车成功组件传递参数" class="hash-link" aria-label="向加入购物车成功组件传递参数的直接链接" title="向加入购物车成功组件传递参数的直接链接">​</a></h3><p>​		1.可以使用路由跳转带参数，但是这样地址栏不太美观</p><p>​	<strong>本地存储和会话存储的区别：</strong>   一般存储的都是字符串</p><p>​			本地存储：持久化（电脑关机，浏览器关闭数据还在），数据内存上限5m</p><p>​			会话存储：并非持久（电脑关机，浏览器关闭，页面关闭数据就消失了）</p><p>​	<strong>所以这里使用会话存储传递参数</strong>	</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//详情组件跳转以及使用会话存储保存数据（简单的数据可以使用路由跳转带过去）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">this.$router.push({name:&#x27;shopcart&#x27;,query:{skuNum:this.skuNum}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sessionStorage.setItem(&#x27;SKUINFO&#x27;,JSON.stringify(this.skuInfo))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//加入购物车成功组件从会话存储中获取数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">computed:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skuInfo(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return JSON.parse(sessionStorage.getItem(&#x27;SKUINFO&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后动态展示数据</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置加入购物车成功的两个按钮">设置加入购物车成功的两个按钮<a href="#设置加入购物车成功的两个按钮" class="hash-link" aria-label="设置加入购物车成功的两个按钮的直接链接" title="设置加入购物车成功的两个按钮的直接链接">​</a></h3><p>​	返回详情：路由跳转到详情页面并带回商品id参数</p><p>​	去购物车结算：路由跳转到购物车界面，引入购物车组件，注册路由组件</p><h1>17.购物车组件</h1><p>1.写接口，vuex三连环，发请求，保存数据，在购物车组件展示数据</p><p><strong>但是这里服务器并不知道你是谁</strong>，<strong>所以不会返回数据</strong>，</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1游客身份获取购物车数据">1.游客身份获取购物车数据<a href="#1游客身份获取购物车数据" class="hash-link" aria-label="1.游客身份获取购物车数据的直接链接" title="1.游客身份获取购物车数据的直接链接">​</a></h3><p>​	1.添加UUID-token让服务器知道你是谁</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//新建一个文件夹utils，创建一个js文件uuid_token，生成一个id，存储在本地</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import {v4 as uuidv4} from &#x27;uuid&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//生成一个随机字符串，且每次执行不能发生变化，游客身份要持久存储</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const getUUID = ()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //检测本地存储中有没有UUID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let uuid_token = localStorage.getItem(&#x27;UUIDTOKEN&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //如果没有，则生成一个存储到本地</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(!uuid_token){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uuid_token = uuidv4()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        localStorage.setItem(&#x27;UUIDTOKEN&#x27;,uuid_token)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //千万别忘了返回值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return uuid_token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	2.把uuid存储在仓库中</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   //记得引入封装好的函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   uuid_token:getUUID()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	3.把uuid作为请求头带给服务器</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//请求拦截器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requests.interceptors.request.use((config)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //config  就是配置对象，里面有一个很重要的属性    headers 请求头</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //在请求头中加一个字段（userTempId） 不能随便写，这个是要和后台商量的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(store.state.detail.uuid_token){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //如果仓库中有uuid，那么就把uuid写在请求头上带过去</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.headers.userTempId = store.state.detail.uuid_token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nProgress.start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样服务器就知道你是谁，就会返回相应的购物车数据</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2服务器可以返回数据了就需要仓库存储组件获取动态展示">2.服务器可以返回数据了，就需要仓库存储，组件获取，动态展示<a href="#2服务器可以返回数据了就需要仓库存储组件获取动态展示" class="hash-link" aria-label="2.服务器可以返回数据了，就需要仓库存储，组件获取，动态展示的直接链接" title="2.服务器可以返回数据了，就需要仓库存储，组件获取，动态展示的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const getters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cartList(state){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return state.shopCartList[0] || {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...mapGetters([&quot;cartList&quot;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //购物车的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   cartInfoList() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return this.cartList.cartInfoList||[];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //底部复选框全选</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     isAllCheck(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //遍历数组里面的所以元素，只要有一个ischecked不是1，就返回false ，是1返回true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return this.cartInfoList.every(item=&gt;item.isChecked==1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后v-for遍历商品，动态展示</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3购物车商品数量加减自定义要使用节流">3.购物车商品数量加减自定义【要使用节流】<a href="#3购物车商品数量加减自定义要使用节流" class="hash-link" aria-label="3.购物车商品数量加减自定义【要使用节流】的直接链接" title="3.购物车商品数量加减自定义【要使用节流】的直接链接">​</a></h3><p>​	1.给＋，-，以及input框添加事件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a href=&quot;javascript:void(0)&quot; class=&quot;mins&quot; @click=&quot;handler(minus,-1,cart)&quot;&gt;-&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;input autocomplete=&quot;off&quot; type=&quot;text&quot; :value=&quot;cart.skuNum&quot; minnum=&quot;1&quot; class=&quot;itxt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @change=&quot;handler(change,$event.target.value,cart)&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a href=&quot;javascript:void(0)&quot; class=&quot;plus&quot; @click=&quot;handler(add,1,cart)&quot;&gt;+&lt;/a&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	2.设置handler事件【要节流，不然点击过快是会出现商品数量为0或者负数的情况】</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> handler:throttle(async function(type,disNum,cart){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //type：为了区分三个元素</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //disNum：变化量（1，-1），input是最终值，不是变化量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //cart：哪一个产品【身上有id】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果点的是+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(type == &#x27;add&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        disNum = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果点的是-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }else if(type == &#x27;minus&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(cart.skuNum &gt; 1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          disNum = -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          disNum = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果修改的是文本框的内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }else if(type == &#x27;change&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果输入的是非法的或者是小于1的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(isNaN(disNum*1)||disNum &lt; 1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          disNum = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //是正常的但是可能是小数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          disNum = Math.floor(disNum) - cart.skuNum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //向服务器发请求，修改购物车数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       await this.$store.dispatch(&#x27;addOrUpdateShopCart&#x27;,{skuId : cart.skuId,skuNum : disNum})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       //更新数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alert(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4购物车某产品删除按钮">4.购物车某产品删除按钮<a href="#4购物车某产品删除按钮" class="hash-link" aria-label="4.购物车某产品删除按钮的直接链接" title="4.购物车某产品删除按钮的直接链接">​</a></h3><p>​	1.写api请求，在仓库中写请求，给按钮绑定事件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    //删除购物车某一个商品</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async deleteCart({commit},skuId){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqDeleteCart(skuId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;faile&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //绑定事件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;a class=&quot;sindelet&quot; @click=&quot;deleteCart(cart)&quot;&gt;删除&lt;/a&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	2.写事件回调,</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    async deleteCart(cart){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //派发删除的请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await this.$store.dispatch(&#x27;deleteCart&#x27;,cart.skuId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       //更新页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5修改产品的勾选状态">5.修改产品的勾选状态<a href="#5修改产品的勾选状态" class="hash-link" aria-label="5.修改产品的勾选状态的直接链接" title="5.修改产品的勾选状态的直接链接">​</a></h3><p>​	1.写api请求，在仓库中写请求，给按钮绑定事件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    //修改购物车产品选中状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async updateChecked({commit},{skuId,isChecked}){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqUpdateChecked(skuId,isChecked)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //绑定事件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;input type=&quot;checkbox&quot; name=&quot;chk_list&quot; :checked=&quot;cart.isChecked == 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @change=&quot;updateChecked(cart,$event)&quot; /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	2.事件回调</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   async updateChecked(cart,event){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let isChecked = event.target.checked ? 1:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await this.$store.dispatch(&#x27;updateChecked&#x27;,{skuId:cart.skuId,isChecked})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6删除选中的商品">6.删除选中的商品<a href="#6删除选中的商品" class="hash-link" aria-label="6.删除选中的商品的直接链接" title="6.删除选中的商品的直接链接">​</a></h3><p>​	1.设置点击事件</p><p>​	2.回调函数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    deleteAllCheckedCart(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.cartInfoList.forEach(item=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(item.isChecked == 1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.deleteCart(item)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	<strong>或者</strong>：在仓库中</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//删除选中的商品</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     deleteAllCart({ commit, state, dispatch }) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          let arr = [];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //获取仓库里面购物车的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          state.shopCartInfo[0].cartInfoList.forEach(item =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               //商品的勾选状态是勾选的,发请求一个一个删除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               if (item.isChecked == 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    let ps = dispatch(&#x27;deleteCartById&#x27;, item.skuId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    //将每一次返回的promise添加到数组中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    arr.push(ps);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //只有所有的都成功，才返回成功，有一个失败，返回的结果即为失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return Promise.all(arr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	组件中</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    //删除选中的商品</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async deleteAllCart(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         //等待全部勾选商品删除以后</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         await  this.$store.dispatch(&#x27;deleteAllCart&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         //再次获取购物车的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         this.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         alert(&#x27;删除失败&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7全选按钮的勾选">7.全选按钮的勾选<a href="#7全选按钮的勾选" class="hash-link" aria-label="7.全选按钮的勾选的直接链接" title="7.全选按钮的勾选的直接链接">​</a></h3><p>​	1.绑定事件，写回调</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;input class=&quot;chooseAll&quot; type=&quot;checkbox&quot; :checked=&#x27;isAllCheck&amp;&amp;cartInfoList.length!=0&#x27; @change=&quot;updateAllCartChecked($event)&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;span&gt;全选&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //回调函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async updateAllCartChecked(event){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let isChecked = event.target.checked?1:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await this.$store.dispatch(&#x27;updateAllCartisChecked&#x27;,isChecked)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.getData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //在仓库中派发action请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateAllCartisChecked({dispatch,getters},isChecked){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let promiseAll = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        getters.cartList.cartInfoList.forEach(item =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // if(isChecked==1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //     item.isChecked = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //     dispatch(&#x27;updateChecked&#x27;,{skuId:item.skuId,isChecked:item.isChecked})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //     item.isChecked = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //     dispatch(&#x27;updateChecked&#x27;,{skuId:item.skuId,isChecked:item.isChecked})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            let promise = dispatch(&#x27;updateChecked&#x27;,{skuId:item.skuId,isChecked})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            promiseAll.push(promise)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Promise.all(promiseAll)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>18.登录注册（重要！！！）</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一注册表单验证后面再说">一、注册（表单验证后面再说）<a href="#一注册表单验证后面再说" class="hash-link" aria-label="一、注册（表单验证后面再说）的直接链接" title="一、注册（表单验证后面再说）的直接链接">​</a></h2><p>1.设置响应式数据：phone，password，password1，code，且v--modle</p><p>2.发验证码</p><p>​	①.写请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//获取验证码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqGetCode = (phone)=&gt;requests({url:`/user/passport/sendCode/${phone}`,method:&#x27;get&#x27;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	②.写action请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> //获取验证码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async getCode({commit},phone){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //返回的是验证码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let res = await reqGetCode(phone)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        commit(&#x27;GETCODE&#x27;,res.data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Promise.reject(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    由于不能直接发短信，所以要把验证码保存在仓库里</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>​	③、绑定事件，派发action请求，向服务器发请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async getCode(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          const {phone} = this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          phone &amp;&amp; await this.$store.dispatch(&#x27;getCode&#x27;,this.phone)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          this.code = this.$store.state.user.code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.完成注册</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//注册</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqUserRegister = (data)=&gt;requests({url:&#x27;/user/passport/register&#x27;,data,method:&#x27;post&#x27;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//注册，action请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async userRegister({commit},user){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqUserRegister(user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //绑定事件，发请求，跳转到登录界面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        async userRegister(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          const {phone,code,password,password1} = this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ;(phone&amp;&amp;code&amp;&amp;password == password1) &amp;&amp; await this.$store.dispatch(&#x27;userRegister&#x27;,{phone,code,password})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$router.push(&#x27;/login&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二登录">二、登录<a href="#二登录" class="hash-link" aria-label="二、登录的直接链接" title="二、登录的直接链接">​</a></h2><p>1.动态获取账号，密码的数据</p><p>2.写登录的接口，在vuex中写请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqUserLogin = (data) =&gt; requests({url:&#x27;/user/passport/login&#x27;,data,method:&#x27;post&#x27;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//写action，把token储存到state中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async userLogin({commit},data){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqUserLogin(data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // console.log(res);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            commit(&#x27;USERLOGIN&#x27;,res.data.token)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.在组件中设置点击事件，写回调函数，登录成功跳转到主页</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">     async userLogin(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          const {phone,password} = this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        phone&amp;&amp;password&amp;&amp;await this.$store.dispatch(&#x27;userLogin&#x27;,{phone,password})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$router.push(&#x27;/home&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="三登录之后在header组件动态展示用户的信息">三、登录之后在header组件动态展示用户的信息<a href="#三登录之后在header组件动态展示用户的信息" class="hash-link" aria-label="三、登录之后在header组件动态展示用户的信息的直接链接" title="三、登录之后在header组件动态展示用户的信息的直接链接">​</a></h2><p>1.写请求，写action</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//获取登录的用户信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const reqUserInfo = () =&gt; requests({url:&#x27;/user/passport/auth/getUserInfo&#x27;,method:&#x27;get&#x27;})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //登录时获取用户信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async getUserInfo(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqUserInfo()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            commit(&#x27;GETUSERINFO&#x27;,res.data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.发请求时判断仓库里有没有token，如果有就作为请求头的字段带给服务器</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    if(store.state.user.token){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.headers.token = store.state.user.token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.在home组件挂载完毕的时候，派发action请求，如果仓库中token，发请求就会把用户的token带给服务器，返回用户的信息，</p><p>​	hearder组件动态展示</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">                            header组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">computed:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userName(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //用户信息，动态展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return this.$store.state.user.userInfo.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &lt;p v-if=&quot;!userName&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;span&gt;请&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;router-link to=&quot;/login&quot;&gt;登录&lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;router-link to=&quot;/register&quot; class=&quot;register&quot;&gt;免费注册&lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;p v-else&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;a&gt;{{userName}}&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;a  class=&quot;register&quot;&gt;退出登录&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/p&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>注意</strong>：</p><p>​		由于vuex存储数据是非持久的，</p><p>​	所以页面一刷新，token及用户的信息就会消失，所以要在登录时把token保存到本地（持久化存储）（也可以 封装为两个函数保存读取token），这样页面刷新的时候token就不会消失，服务器就会返回相应的用户的数据</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   async userLogin({commit},data){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqUserLogin(data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // console.log(res);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            commit(&#x27;USERLOGIN&#x27;,res.data.token)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //把token持久化保存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            localStorage.setItem(&#x27;TOKEN&#x27;,res.data.token)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;ok&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;falie&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //这样读取token，本地读取不到的时候token就是null，可以读取到就是服务器返回的token的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const state = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code:&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    token:localStorage.getItem(&#x27;TOKEN&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userInfo:{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>但是</strong></p><p>​	这样只是在home组件中才会展示用户信息，其他组件中还是获取不到信息</p><p>1.可以放在每个组件里，但是太麻烦</p><p>2.可以放在app组件中，但是第一次登录的时候获取不到用户信息</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="四退出登录">四、退出登录<a href="#四退出登录" class="hash-link" aria-label="四、退出登录的直接链接" title="四、退出登录的直接链接">​</a></h2><p>退出登录需要做的事：1：通知服务器退出登录       2：删除项目中关于用户的信息（token，userInfo）</p><p>1.写请求</p><p>2.action请求，删除用户信息</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async logout({commit}){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let res = await reqLogout()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            commit(&#x27;CLEAR&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &#x27;OK&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Promise.reject(new Error(&#x27;faile&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CLEAR(state){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        state.token = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        state.userInfo = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        localStorage.removeItem(&#x27;TOKEN&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.设置点击事件，写回调派发请求</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async logout(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await this.$store.dispatch(&quot;logout&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.$router.push(&#x27;/home&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                alert(error.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="五路由守卫">五、路由守卫<a href="#五路由守卫" class="hash-link" aria-label="五、路由守卫的直接链接" title="五、路由守卫的直接链接">​</a></h2><p>全局路由守卫					组件内守卫						路由独享守卫</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.想来交易页面，必须是从购物车页面来的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.想来支付页面，必须是从交易页面来的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.想来支付成功页面，必须是从支付页面来的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//路由独享守卫</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beforeEnter: (to, from, next) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //想来交易页面，必须是从购物车页面来的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if(from.path == &#x27;/shopcart&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                next(flase)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> to：可以获取到你要跳转到哪个路由的信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> from：可以获取到逆从哪个路由而来</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> next：放行函数  next()放行  next(path)放行到指定路由   next(false)从哪里来的回到哪里去</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>问题</strong></p><p>1.跳转到其他页面时，刷新页面还是获取不到用户信息</p><p>2.登录之后不能再跳转到login页面</p><p>解决办法：1.在前置路由守卫中，判断跳转到其他页面的时候，仓库中有没有用户的信息，有就跳转，没有就派发action请求获取到用户信息再跳转。</p><p>2.判断仓库中有没有token，如果没有token，就一定没有登录，如果有token那就是登录了，就不让其跳转到login页面，而是返回home组件。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">router.beforeEach(async (to,from,next)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let token = store.state.user.token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let name = store.state.user.userInfo.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//登录了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(token){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //登录了，而且去的是登录页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(to.path == &#x27;/login&#x27;){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        next(&#x27;/home&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //登录了，但是去的不是登录页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //如果有用户信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(name){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //如果没有用户信息，就派发请求获取用户信息，这样header上的信息就会展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await store.dispatch(&#x27;getUserInfo&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              //失败了就代表token失效了，需要重新登录   1.派发退出登录的action 2.跳转到登录界面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await store.dispatch(&#x27;logout&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                next(&#x27;/login&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //未登录不能去交易相关的，支付相关的，个人中心</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let toPath = to.path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(toPath.indexOf(&#x27;/trade&#x27;) != -1 || toPath.indexOf(&#x27;/pay&#x27;) != -1 || toPath.indexOf(&#x27;/center&#x27;) != -1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //这里是将想要去但是没去成的路径保存在query参数中*********小技巧********</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        next(&#x27;/login?toPath=&#x27;+toPath)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//在登录页面，点击登录按钮时，判断路由是否有query参数，有则跳转到query参数指定的地方，没有则跳转到‘/home’</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let toPath = this.$route.query.toPath || &#x27;/home&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> this.$router.push(toPath)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>19.订单页面</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一动态展示">一、动态展示<a href="#一动态展示" class="hash-link" aria-label="一、动态展示的直接链接" title="一、动态展示的直接链接">​</a></h2><p>​	1.引入交易静态页面，注册交易组件，设置路由，设置路由跳转</p><p>​	2.写请求，vuex，获取到服务器返回的信息，动态展示</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//获取到服务器返回的地址数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...mapState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addressInfo:state=&gt;state.trade.address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //动态展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;address clearFix&quot; v-for=&quot;address in addressInfo&quot; :key=&quot;address.id&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;span class=&quot;username&quot; :class=&quot;{selected:address.isDefault == 1}&quot;&gt;{{address.consignee}}&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;p  @click=&quot;changeIsDefault(address)&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;span class=&quot;s1&quot;&gt;{{address.fullAddress}}&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;span class=&quot;s2&quot;&gt;{{address.phoneNum}}&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;span class=&quot;s3&quot; v-show=&quot;address.isDefault == 1&quot;&gt;默认地址&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //修改默认地址（排他）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      changeIsDefault(address){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // console.log(address);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.addressInfo.forEach(item =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.isDefault = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address.isDefault = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //计算出要寄出的地址，在页面下方展示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      userDefaultAddress(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //find：查找数组中符合条件的对象，返回</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.addressInfo.find(item=&gt;item.isDefault==1)||{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //这里计算的时候addressInfo还有可能是个空数组，所以里面的属性可能是undefined，要添加一个兜底的，防止假报错</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//获取到服务器返回的订单数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//动态展示，很简单就不做笔记了</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二提交订单">二、提交订单<a href="#二提交订单" class="hash-link" aria-label="二、提交订单的直接链接" title="二、提交订单的直接链接">​</a></h2><p><strong>1.注意</strong>：从此不再使用vuex写请求，在组件中写，所以为了避免组件中多次引入请求函数</p><p>所以在入口文件中【main.js】中，将请求函数引到vue的原型对象上，这样所有组件就都可以获取到请求函数（<strong>和全局事件总线类似</strong>）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//统一引入所有暴露的接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as API from &#x27;@/api&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//把api文件夹中的请求函数放在vue组建的原型对象上，这样所有的组件就都可以直接使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Vue.prototype.$API = API</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.写请求，绑定提交订单按钮的事件回调，</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async submitOrder() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let { tradeNo } = this.orderInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let data = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consignee: this.userDefaultAddress.consignee,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consigneeTel: this.userDefaultAddress.phoneNum,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deliveryAddress: this.userDefaultAddress.fullAddress,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        paymentWay: &quot;ONLINE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orderComment: this.message,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orderDetailList: this.orderInfo.detailArrayList</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let res = await this.$API.reqSubmitOrder(tradeNo,data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(res.code == 200){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.orderId = res.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //成功路由跳转传参</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.$router.push(`/pay?orderId=${this.orderId}`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alert(res.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>20.支付页面</h1><p>1.接收传入的订单号，带着订单号发请求，接收到服务器返回的数据，更改页面中需要动态展示的数据</p><p>2.使用饿了么UI组件库，设计支付弹窗【涉及到饿了么组件库，和<strong>qrcode</strong>二维码生成插件】【使用见官方文档】</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//给立即支付设置点击事件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async open() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //生成二维码图片地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let url = await QRCode.toDataURL(this.payInfo.codeUrl)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.$alert(`&lt;img src=${url} /&gt;`, &quot;请你使用微信支付&quot;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dangerouslyUseHTMLString: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showCancelButton:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        center:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cancelButtonText:&#x27;支付时遇到困难&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        confirmButtonText:&#x27;支付成功&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showClose:false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//设置点击确定和取消按钮的业务逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beforeClose: (type, instance, done) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //type:区分取消按钮及成功按钮</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //instance：当前组件实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //done:关闭弹窗的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (type == &quot;cancel&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            alert(&quot;请联系管理员&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearInterval(this.timer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.timer = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            done();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (this.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              clearInterval(this.timer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              this.timer = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              done();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              this.$router.push(&quot;/paySuccess&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //你需要知道订单支付的成功或失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //支付成功，路由跳转，支付失败，提示信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果没有定时器，则开启一个定时器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//若扫码直接跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (!this.timer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.timer = setInterval(async () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          let res = await this.$API.reqPayStatus(this.orderId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (res.code == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //支付成功要做：1.清除定时器  2.关闭窗口  3.跳转路由</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearInterval(this.timer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.timer = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //保存code，是为了防止用户没有支付却点击支付成功，进行路由跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.code = res.code;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$msgbox.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.$router.push(&quot;/paySuccess&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, 1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.支付成功页面，点击查看订单跳转到个人页面，点击继续购物跳转到主页</p><h1>21.个人信息页面</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1二级子路由设置">1.二级子路由设置<a href="#1二级子路由设置" class="hash-link" aria-label="1.二级子路由设置的直接链接" title="1.二级子路由设置的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//引入二级子组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import .....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//注册路由</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name:&#x27;center&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path:&#x27;/center&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component:Center,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meta:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            showFooter:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        children:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //这里的path要么写 /center/myOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path:&#x27;myOrder&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                component:MyOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path:&#x27;groupOrder&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                component:GroupOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //二级路由重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path:&#x27;/center&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                redirect:&#x27;/center/myOrder&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>注意</strong>      不要忘记router-link    和     router-view</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;router-link to=&quot;/center/myOrder&quot;&gt;我的订单&lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 二级路由出口位置 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;router-view&gt;&lt;/router-view&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2我的订单组件的动态展示">2.我的订单组件的动态展示<a href="#2我的订单组件的动态展示" class="hash-link" aria-label="2.我的订单组件的动态展示的直接链接" title="2.我的订单组件的动态展示的直接链接">​</a></h2><p>​	1.写请求，请求需要带参数，所以在组件内设置两个响应式的数据，带给服务器</p><p>​	2.我的订单组件mounted时，向服务器发请求，获取个人中心的订单数据，在组件内发请求【把请求函数封装为一个函数，在组件mounted的时候调用】，获取数据，动态展示数据</p><p>​	3.这里涉及到了合并单元格，一个订单会买很多的产品，但是最终的数据还是要合并单元格的，这里会遍历多个数据，但是只展示数组里的第一个的数据就不会出现一个订单出现多个最终数据的情况</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;td :rowspan=&quot;order.orderDetailList.length&quot; v-if=&quot;index == 0&quot; width=&quot;13%&quot; class=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;td :rowspan=&quot;order.orderDetailList.length&quot; v-if=&quot;index == 0&quot; width=&quot;8%&quot; class=&quot;center&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> .....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/td&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3引入全局组件分页器">3.引入全局组件分页器<a href="#3引入全局组件分页器" class="hash-link" aria-label="3.引入全局组件分页器的直接链接" title="3.引入全局组件分页器的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;FsPagination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :pageNo=&quot;page&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :pageSize=&quot;limit&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :total=&quot;myOrderList.total&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            :continues=&quot;5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @getPageNo = &#x27;getPageNo&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  getPageNo(page){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.page = page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.getMyOrderList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>22.图片懒加载</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.下载lazyload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.使用注册</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//引入懒加载图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import vueLoge from &#x27;@/assets/logo.png&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//引入图片懒加载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import VueLazyload from &#x27;vue-lazyload&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vue.use(VueLazyload,{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //懒加载默认的图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loading:vueLoge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.在需要懒加载的地方，设置图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;img v-lazy=&quot;good.defaultImg&quot; /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>23.注册的表单验证</h1><p>1：安装vee-valadite，安装版本@2
2：在plugins文件夹中创建一个validate.js<!-- -->[专门注册vee-valadite]<!-- -->
3：注册插件
4：注册插件的时候，用中文，以及需要验证的字段【用中文显示提示形式】
5：在入口文件需要引入执行一次
6:使用vee-valadiate插件</p><p>在validate.js文件中</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Vue from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import VeeValidate from &#x27;vee-validate&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import zh_CN from &#x27;vee-validate/dist/locale/zh_CN&#x27;   // 引入中文 message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vue.use(VeeValidate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//表单验证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VeeValidate.Validator.localize(&#x27;zh_CN&#x27;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    messages: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...zh_CN.messages,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        is: (field) =&gt; `${field}必须与密码相同` // 修改内置规则的 message，让确认密码和密码相同</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attributes: { // 给校验的 field 属性名映射中文名称</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        phone: &#x27;手机号&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        code: &#x27;验证码&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password: &#x27;密码&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password1: &#x27;确认密码&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        agree: &#x27;协议&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//自定义，用于勾选协议的判断</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VeeValidate.Validator.extend(&#x27;agree&#x27;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validate: value =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getMessage: field =&gt; field + &#x27;必须同意&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在组件中，需要进行表单验证的地方</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          placeholder=&quot;请确认你的密码&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          v-model=&quot;password1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name=&quot;password1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          v-validate=&quot;{ required: true, regex: 正则表达式  或者is: password//和密码进行比对 }&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          :class=&quot;{ invalid: errors.has(&#x27;password1&#x27;) }&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;span class=&quot;error-msg&quot;&gt;{{ errors.first(&quot;password1&quot;) }}&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//协议勾选</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          type=&quot;checkbox&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          v-model=&quot;agree&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name=&quot;agree&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          v-validate=&quot;{ required: true, agree: true }&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          :class=&quot;{ invalid: errors.has(&#x27;agree&#x27;) }&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;span class=&quot;error-msg&quot;&gt;{{ errors.first(&quot;agree&quot;) }}&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//点击注册按钮时，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const success = await this.$validator.validateAll();//确定所有的表单已经验证成功了 success返回true是验证成功反之失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (success) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //如果表单验证全部通过了，才发请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>24.路由懒加载</h1><p>用户访问哪个路由组件时，组件才加载，这样会变得十分高效</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//注册组件的时候</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path:&#x27;/home&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // component:FsHome,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        component:()=&gt;import(&#x27;@/pages/Home&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meta:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            showFooter:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>npm run build 打包的时候，如果不需要map文件，可以在vue.config.js文件中配置：productionSourceMap:false;</p><p><img loading="lazy" src="C:%5CUsers%5C48399%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221110190015262.png" alt="image-20221110190015262" class="img_ev3q"></p><p>6.nginx服务器跑起来</p><p>service nginx start</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/7-Vue项目笔记/1-电商项目知识点.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/intro"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Tutorial Intro</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Vue项目笔记/后台管理系统知识点"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">一、登录业务（跨域问题修改配置）</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#第一种解决方案" class="table-of-contents__link toc-highlight">第一种解决方案，</a></li><li><a href="#2swiper在vue项目中使用完美解决方案" class="table-of-contents__link toc-highlight">2:Swiper在Vue项目中使用完美解决方案</a></li><li><a href="#search组件动态获取数据" class="table-of-contents__link toc-highlight">search组件动态获取数据</a></li><li><a href="#根据不同参数动态获取数据进行展示" class="table-of-contents__link toc-highlight">根据不同参数动态获取数据进行展示</a></li><li><a href="#点击三级列表或者进行搜索获取数据" class="table-of-contents__link toc-highlight">点击三级列表或者进行搜索获取数据</a></li><li><a href="#处理面包屑问题" class="table-of-contents__link toc-highlight">处理面包屑问题</a></li><li><a href="#排序问题" class="table-of-contents__link toc-highlight">排序问题</a></li><li><a href="#售卖属性的class属性动态点击变化" class="table-of-contents__link toc-highlight">售卖属性的class属性动态点击变化</a></li><li><a href="#放大镜zoom和imagelist组件" class="table-of-contents__link toc-highlight">放大镜zoom和imageList组件</a></li><li><a href="#商品数加一减一以及用户输入数量" class="table-of-contents__link toc-highlight">商品数加一减一以及用户输入数量</a></li><li><a href="#在详情组件点击加入购物车按钮要添加的事件" class="table-of-contents__link toc-highlight">在详情组件点击加入购物车按钮要添加的事件</a></li><li><a href="#向加入购物车成功组件传递参数" class="table-of-contents__link toc-highlight">向加入购物车成功组件传递参数</a></li><li><a href="#设置加入购物车成功的两个按钮" class="table-of-contents__link toc-highlight">设置加入购物车成功的两个按钮</a></li><li><a href="#1游客身份获取购物车数据" class="table-of-contents__link toc-highlight">1.游客身份获取购物车数据</a></li><li><a href="#2服务器可以返回数据了就需要仓库存储组件获取动态展示" class="table-of-contents__link toc-highlight">2.服务器可以返回数据了，就需要仓库存储，组件获取，动态展示</a></li><li><a href="#3购物车商品数量加减自定义要使用节流" class="table-of-contents__link toc-highlight">3.购物车商品数量加减自定义【要使用节流】</a></li><li><a href="#4购物车某产品删除按钮" class="table-of-contents__link toc-highlight">4.购物车某产品删除按钮</a></li><li><a href="#5修改产品的勾选状态" class="table-of-contents__link toc-highlight">5.修改产品的勾选状态</a></li><li><a href="#6删除选中的商品" class="table-of-contents__link toc-highlight">6.删除选中的商品</a></li><li><a href="#7全选按钮的勾选" class="table-of-contents__link toc-highlight">7.全选按钮的勾选</a></li><li><a href="#一注册表单验证后面再说" class="table-of-contents__link toc-highlight">一、注册（表单验证后面再说）</a></li><li><a href="#二登录" class="table-of-contents__link toc-highlight">二、登录</a></li><li><a href="#三登录之后在header组件动态展示用户的信息" class="table-of-contents__link toc-highlight">三、登录之后在header组件动态展示用户的信息</a></li><li><a href="#四退出登录" class="table-of-contents__link toc-highlight">四、退出登录</a></li><li><a href="#五路由守卫" class="table-of-contents__link toc-highlight">五、路由守卫</a></li><li><a href="#一动态展示" class="table-of-contents__link toc-highlight">一、动态展示</a></li><li><a href="#二提交订单" class="table-of-contents__link toc-highlight">二、提交订单</a></li><li><a href="#1二级子路由设置" class="table-of-contents__link toc-highlight">1.二级子路由设置</a></li><li><a href="#2我的订单组件的动态展示" class="table-of-contents__link toc-highlight">2.我的订单组件的动态展示</a></li><li><a href="#3引入全局组件分页器" class="table-of-contents__link toc-highlight">3.引入全局组件分页器</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1d17331b.js"></script>
<script src="/assets/js/main.8f358769.js"></script>
</body>
</html>